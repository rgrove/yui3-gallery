YUI.add("gallery-node-optimizations",function(d){var e=/^\.([-_a-z0-9]+)$/i;var a=/^[a-z]+$/i;var b=d.Node.prototype.ancestor;d.Node.prototype.ancestor=function(g,h){if(d.Lang.isString(g)){var f=e.exec(g);if(f&&f.length){return this.getAncestorByClassName(f[1],h);}if(a.test(g)){return this.getAncestorByTagName(g,h);}}return b.apply(this,arguments);};d.Node.prototype.getAncestorByClassName=function(g,f){var h=this._node;if(!f){h=h.parentNode;}while(h&&!d.DOM.hasClass(h,g)){h=h.parentNode;if(!h||!h.tagName){return null;}}return d.one(h);};d.Node.prototype.getAncestorByTagName=function(h,f){var g=this._node;if(!f){g=g.parentNode;}h=h.toLowerCase();while(g&&g.tagName.toLowerCase()!=h){g=g.parentNode;if(!g||!g.tagName){return null;}}return d.one(g);};var c=d.Node.prototype.all;d.Node.prototype.all=function(g){if(d.Lang.isString(g)){var f=e.exec(g);if(f&&f.length){return this.getElementsByClassName(f[1]);}if(a.test(g)){return this.getElementsByTagName(g);}}return c.apply(this,arguments);};d.Node.prototype.getElementsByClassName=function(j,l){var m=this.getElementsByTagName(l||"*");var h=null;var g=m.size();for(var f=0;f<g;f++){var k=m.item(f);if(d.DOM.hasClass(d.Node.getDOMNode(k),j)){if(!h){h=new d.NodeList(k);}else{h.push(k);}}}if(!h){h=new d.NodeList("#surely-this-cannot-possibly-exist-on-your-page");}return h;};},"gallery-2011.06.15-19-18",{requires:["node-base"]});