YUI.add("gallery-progress-bar",function(a){a.ProgressBar=a.Base.create("progressBar",a.Widget,[],{currentLabel:"",_anim:null,renderUI:function(){this.get("contentBox").append(a.substitute(this.get("layout"),{sliderClass:this.getClassName("slider"),labelClass:this.getClassName("label")}));},bindUI:function(){this.after("labelChange",this._updateLabel);this.after("progressChange",this._updateBackground);},syncUI:function(){this._updateBackground();},increment:function(b){b=b||1;this.set("progress",this.get("progress")+parseFloat(b,10));return this;},decrement:function(b){b=b||1;this.set("progress",this.get("progress")-parseFloat(b,10));return this;},update:function(b){this.set("progress",b);return this;},setLabelAt:function(b,d){var c=this.get("label");b=parseFloat(b,10);c[b]=d;this.set("label",c);return this;},removeLabelAt:function(b){var c=this.get("label");b=parseFloat(b,10);if(c[b]!==undefined&&c[b]!==null){delete c[b];}this.get("label",c);return this;},_updateLabel:function(k){var g=this.getAttrs(),f=this.get("label"),d=this.get("progress"),j,c,h=-1,b;if(f[d]!==undefined&&f[d]!==null){c=f[d];}else{j=a.Object.keys(f);j.sort(a.Array.numericSort);b=j.length;while(++h<b){if(j[h]<=d){c=f[j[h]];}}}g.label=c||"";this.get("contentBox").one("."+this.getClassName("label")).set("text",a.substitute(this.get("labelTemplate"),g));},_updateBackground:function(d){var c=this.get("contentBox"),b=c.get("offsetWidth")*this.get("progress")/100;if(!this._anim){this._makeAnim();}if(this._anim&&this._anim.get("running")){this._anim.pause();}this._anim.set("to.width",b);this._anim.run();this._updateLabel();},_makeAnim:function(){var c=this.get("animation"),b=this.get("contentBox").one(this.get("animateNode"));c.node=b;if(!c.to){c.to={width:0};}this._anim=new a.Anim(c);},_getAnimateNode:function(){return("."+this.getClassName("slider"));}},{ATTRS:{animation:{value:{easing:a.Easing.easeIn,duration:0.5}},animateNode:{valueFn:"_getAnimateNode"},labelTemplate:{value:"{label} - {progress}%"},label:{value:{0:"Loading",100:"Complete"},validator:function(b){return(a.Lang.isString(b)||a.Lang.isObject(b));},setter:function(b){if(a.Lang.isString(b)){b={0:b};}return b;}},layout:{value:'<div class="{sliderClass} {labelClass}"></div>'},precision:{value:2,setter:function(b){return parseInt(b,10);}},progress:{value:0,setter:function(c){var b=Math.pow(10,this.get("precision"));c=parseFloat(c,10);if(c<0){c=0;}else{if(c>100){c=100;}}return Math.round(c*b)/b;}}}});},"gallery-2010.12.16-18-24",{requires:["widget","gallery-effects","substitute"]});