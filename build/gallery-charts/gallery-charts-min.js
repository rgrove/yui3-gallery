YUI.add("gallery-charts",function(b){var v=function(G){this.initializer.apply(this,arguments);};v.prototype={autoSize:true,initializer:function(H){H=H||{};var G=H.width||0,I=H.height||0;if(H.node){this.node=H.node;this._styleGroup(this.node);}else{this.node=this._createGraphics();this.setSize(G,I);}this._initProps();},beginBitmapFill:function(G){var H={};H.src=G.bitmap.src;H.type="tile";this._fillProps=H;if(!isNaN(G.tx)||!isNaN(G.ty)||!isNaN(G.width)||!isNaN(G.height)){this._gradientBox={tx:G.tx,ty:G.ty,width:G.width,height:G.height};}else{this._gradientBox=null;}},beginFill:function(G,H){if(G){this._fillAlpha=H||1;this._fillColor=G;this._fillType="solid";this._fill=1;}return this;},beginGradientFill:function(H){var G=H.alphas||[];if(!this._defs){this._defs=this._createGraphicNode("defs");this.node.appendChild(this._defs);}this._fillAlphas=G;this._fillColors=H.colors;this._fillType=H.type||"linear";this._fillRatios=H.ratios||[];this._fillRotation=H.rotation||0;this._fillWidth=H.width||null;this._fillHeight=H.height||null;this._fillX=!isNaN(H.tx)?H.tx:NaN;this._fillY=!isNaN(H.ty)?H.ty:NaN;this._gradientId="lg"+Math.round(100000*Math.random());return this;},destroy:function(){this._removeChildren(this.node);this.node.parentNode.removeChild(this.node);},_removeChildren:function(G){if(G.hasChildNodes()){var H;while(G.firstChild){H=G.firstChild;this._removeChildren(H);G.removeChild(H);}}},toggleVisible:function(G){this._toggleVisible(this.node,G);},_toggleVisible:function(K,L){var J=b.one(K).get("children"),H=L?"visible":"hidden",I=0,G;if(J){G=J.length;for(;I<G;++I){this._toggleVisible(J[I],L);}}K.style.visibility=H;},clear:function(){if(this._graphicsList){while(this._graphicsList.length>0){this.node.removeChild(this._graphicsList.shift());}}this.path="";},curveTo:function(I,H,K,J,G,L){this._shapeType="path";if(this.path.indexOf("C")<0||this._pathType!=="C"){this._pathType="C";this.path+=" C";}this.path+=Math.round(I)+", "+Math.round(H)+", "+Math.round(K)+", "+Math.round(J)+", "+G+", "+L+" ";this._trackSize(G,L);},quadraticCurveTo:function(I,H,G,J){if(this.path.indexOf("Q")<0||this._pathType!=="Q"){this._pathType="Q";this.path+=" Q";}this.path+=Math.round(I)+" "+Math.round(H)+" "+Math.round(G)+" "+Math.round(J);},drawCircle:function(G,I,H){this._shape={x:G-H,y:I-H,w:H*2,h:H*2};this._attributes={cx:G,cy:I,r:H};this._width=this._height=H*2;this._x=G-H;this._y=I-H;this._shapeType="circle";this._draw();},drawEllipse:function(G,J,H,I){this._shape={x:G,y:J,w:H,h:I};this._width=H;this._height=I;this._x=G;this._y=J;this._shapeType="ellipse";this._draw();},drawRect:function(G,J,H,I){this._shape={x:G,y:J,w:H,h:I};this._x=G;this._y=J;this._width=H;this._height=I;this.moveTo(G,J);this.lineTo(G+H,J);this.lineTo(G+H,J+I);this.lineTo(G,J+I);this.lineTo(G,J);this._draw();},drawRoundRect:function(G,L,H,J,I,K){this._shape={x:G,y:L,w:H,h:J};this._x=G;this._y=L;this._width=H;this._height=J;this.moveTo(G,L+K);this.lineTo(G,L+J-K);this.quadraticCurveTo(G,L+J,G+I,L+J);this.lineTo(G+H-I,L+J);this.quadraticCurveTo(G+H,L+J,G+H,L+J-K);this.lineTo(G+H,L+K);this.quadraticCurveTo(G+H,L,G+H-I,L);this.lineTo(G+I,L);this.quadraticCurveTo(G,L,G,L+K);this._draw();},drawWedge:function(I,L,K,J,H,G){this._drawingComplete=false;this.path=this._getWedgePath({x:I,y:L,startAngle:K,arc:J,radius:H,yRadius:G});this._width=H*2;this._height=this._width;this._shapeType="path";this._draw();},end:function(){if(this._shapeType){this._draw();}this._initProps();},lineGradientStyle:function(){},lineStyle:function(J,I,N,L,K,M,G,H){this._stroke=1;this._strokeWeight=J;if(I){this._strokeColor=I;}this._strokeAlpha=N||1;},lineTo:function(L,K,I){var H=arguments,J,G;if(typeof L==="string"||typeof L==="number"){H=[[L,K]];}G=H.length;this._shapeType="path";if(this.path.indexOf("L")<0||this._pathType!=="L"){this._pathType="L";this.path+=" L";}for(J=0;J<G;++J){this.path+=H[J][0]+", "+H[J][1]+" ";this._trackSize.apply(this,H[J]);}},moveTo:function(G,H){this._pathType="M";this.path+=" M"+G+", "+H;},_getWedgePath:function(Z){var P=Z.x,N=Z.y,U=Z.startAngle,M=Z.arc,I=Z.radius,J=Z.yRadius||I,T,R,L,Y,K,Q,O,X,W,H,G,V=0,S=" M"+P+", "+N;if(Math.abs(M)>360){M=360;}T=Math.ceil(Math.abs(M)/45);R=M/T;L=-(R/180)*Math.PI;Y=(U/180)*Math.PI;if(T>0){Q=P+Math.cos(U/180*Math.PI)*I;O=N+Math.sin(U/180*Math.PI)*J;S+=" L"+Math.round(Q)+", "+Math.round(O);S+=" Q";for(;V<T;++V){Y+=L;K=Y-(L/2);X=P+Math.cos(Y)*I;W=N+Math.sin(Y)*J;H=P+Math.cos(K)*(I/Math.cos(L/2));G=N+Math.sin(K)*(J/Math.cos(L/2));S+=Math.round(H)+" "+Math.round(G)+" "+Math.round(X)+" "+Math.round(W)+" ";}S+=" L"+P+", "+N;}return S;},setSize:function(G,H){if(this.autoSize){if(G>this.node.getAttribute("width")){this.node.setAttribute("width",G);}if(H>this.node.getAttribute("height")){this.node.setAttribute("height",H);}}},_trackSize:function(G,H){if(G>this._width){this._width=G;}if(H>this._height){this._height=H;}this.setSize(G,H);},setPosition:function(G,H){this.node.setAttribute("x",G);this.node.setAttribute("y",H);},render:function(G){var H=G.get("width")||G.get("offsetWidth"),I=G.get("height")||G.get("offsetHeight");G=G||b.config.doc.body;G.appendChild(this.node);this.setSize(H,I);this._initProps();return this;},_initProps:function(){this._shape=null;this._fillColor=null;this._strokeColor=null;this._strokeWeight=0;this._fillProps=null;this._fillAlphas=null;this._fillColors=null;this._fillType=null;this._fillRatios=null;this._fillRotation=null;this._fillWidth=null;this._fillHeight=null;this._fillX=NaN;this._fillY=NaN;this.path="";this._width=0;this._height=0;this._x=0;this._y=0;this._fill=null;this._stroke=0;this._stroked=false;this._pathType=null;this._attributes={};},_clearPath:function(){this._shape=null;this._shapeType=null;this.path="";this._width=0;this._height=0;this._x=0;this._y=0;this._pathType=null;this._attributes={};},_draw:function(){var H=this._createGraphicNode(this._shapeType),I,G;if(this.path){if(this._fill){this.path+="z";}H.setAttribute("d",this.path);}else{for(I in this._attributes){if(this._attributes.hasOwnProperty(I)){H.setAttribute(I,this._attributes[I]);
}}}H.setAttribute("stroke-width",this._strokeWeight);if(this._strokeColor){H.setAttribute("stroke",this._strokeColor);H.setAttribute("stroke-opacity",this._strokeAlpha);}if(!this._fillType||this._fillType==="solid"){if(this._fillColor){H.setAttribute("fill",this._fillColor);H.setAttribute("fill-opacity",this._fillAlpha);}else{H.setAttribute("fill","none");}}else{if(this._fillType==="linear"){G=this._getFill();G.setAttribute("id",this._gradientId);this._defs.appendChild(G);H.setAttribute("fill","url(#"+this._gradientId+")");}}this.node.appendChild(H);this._clearPath();},_getFill:function(){var G=this._fillType,H;switch(G){case"linear":H=this._getLinearGradient("fill");break;case"radial":break;case"bitmap":break;}return H;},_getLinearGradient:function(L){var Z=this._createGraphicNode("linearGradient"),K="_"+L,Q=this[K+"Colors"],T=this[K+"Ratios"],O=this[K+"Alphas"],R=this._fillWidth||(this._shape.w),ac=this._fillHeight||(this._shape.h),V=this[K+"Rotation"],aa,X,Y,P,M,S,W,ad,ab,J,H,I=R/2,G=ac/2,N,U;N=Math.PI/180;U=parseFloat(parseFloat(Math.tan(V*N)).toFixed(8));if(Math.abs(U)*R/2>=ac/2){if(V<180){J=0;H=ac;}else{J=ac;H=0;}ad=I-((G-J)/U);ab=I-((G-H)/U);}else{if(V>90&&V<270){ad=R;ab=0;}else{ad=0;ab=R;}J=((U*(I-ad))-G)*-1;H=((U*(I-ab))-G)*-1;}Z.setAttribute("gradientTransform","rotate("+V+")");Z.setAttribute("width",R);Z.setAttribute("height",ac);Z.setAttribute("gradientUnits","userSpaceOnUse");X=Q.length;S=0;for(aa=0;aa<X;++aa){Y=Q[aa];P=T[aa]||aa/(X-1);P=Math.round(P*100)+"%";M=O[aa]||"1";S=(aa+1)/X;W=this._createGraphicNode("stop");W.setAttribute("offset",P);W.setAttribute("stop-color",Y);W.setAttribute("stop-opacity",M);Z.appendChild(W);}return Z;},_createGraphics:function(){var G=this._createGraphicNode("svg");this._styleGroup(G);return G;},_styleGroup:function(G){G.style.position="absolute";G.style.top="0px";G.style.overflow="visible";G.style.left="0px";G.setAttribute("pointer-events","none");},_createGraphicNode:function(I,G){var J=document.createElementNS("http://www.w3.org/2000/svg","svg:"+I),H=G||"none";if(I!=="defs"&&I!=="stop"&&I!=="linearGradient"){J.setAttribute("pointer-events",H);}if(I!="svg"){if(!this._graphicsList){this._graphicsList=[];}this._graphicsList.push(J);}return J;},getShape:function(G){G.graphic=this;return new b.Shape(G);}};b.Graphic=v;var c=function(G){this.initializer.apply(this,arguments);};c.prototype={initializer:function(H){H=H||{};var G=H.width||0,I=H.height||0;this.node=this._createGraphics();this.setSize(G,I);this._initProps();},beginBitmapFill:function(G){var H={};H.src=G.bitmap.src;H.type="tile";this._fillProps=H;if(!isNaN(G.tx)||!isNaN(G.ty)||!isNaN(G.width)||!isNaN(G.height)){this._gradientBox={tx:G.tx,ty:G.ty,width:G.width,height:G.height};}else{this._gradientBox=null;}},beginFill:function(G,H){if(G){if(H){this._fillProps={type:"solid",opacity:H};}this._fillColor=G;this._fill=1;}return this;},beginGradientFill:function(I){var N=I.type,G=I.colors,H=I.alphas||[],L=I.ratios||[],Q={colors:G,ratios:L},M=H.length,K=0,J,O,P=I.rotation||0;for(;K<M;++K){J=H[K];O=K>0?K+1:"";H[K]=Math.round(J*100)+"%";Q["opacity"+O]=H[K];}if(N==="linear"){if(I){}if(P>0&&P<=90){P=450-P;}else{if(P<=270){P=270-P;}else{if(P<=360){P=630-P;}else{P=270;}}}Q.type="gradientunscaled";Q.angle=P;}else{if(N==="radial"){Q.alignshape=false;Q.type="gradientradial";Q.focus="100%";Q.focusposition="50%,50%";}}Q.ratios=L||[];if(!isNaN(I.tx)||!isNaN(I.ty)||!isNaN(I.width)||!isNaN(I.height)){this._gradientBox={tx:I.tx,ty:I.ty,width:I.width,height:I.height};}else{this._gradientBox=null;}this._fillProps=Q;},clear:function(){this._path="";this._removeChildren(this.node);},destroy:function(){this._removeChildren(this.node);this.node.parentNode.removeChild(this.node);},_removeChildren:function(G){if(G.hasChildNodes()){var H;while(G.firstChild){H=G.firstChild;this._removeChildren(H);G.removeChild(H);}}},toggleVisible:function(G){this._toggleVisible(this.node,G);},_toggleVisible:function(K,L){var J=b.one(K).get("children"),H=L?"visible":"hidden",I=0,G;if(J){G=J.length;for(;I<G;++I){this._toggleVisible(J[I],L);}}K.style.visibility=H;},curveTo:function(I,H,K,J,G,L){this._shape="shape";this._path+=" c "+Math.round(I)+", "+Math.round(H)+", "+Math.round(K)+", "+Math.round(J)+", "+G+", "+L;this._trackSize(G,L);},quadraticCurveTo:function(I,H,G,J){this._path+=" qb "+I+", "+H+", "+G+", "+J;},drawCircle:function(G,I,H){this._width=this._height=H*2;this._x=G-H;this._y=I-H;this._shape="oval";this._draw();},drawEllipse:function(G,J,H,I){this._width=H;this._height=I;this._x=G;this._y=J;this._shape="oval";this._draw();},drawRect:function(G,J,H,I){this._x=G;this._y=J;this._width=H;this._height=I;this.moveTo(G,J);this.lineTo(G+H,J);this.lineTo(G+H,J+I);this.lineTo(G,J+I);this.lineTo(G,J);this._draw();},drawRoundRect:function(G,L,H,J,I,K){this._x=G;this._y=L;this._width=H;this._height=J;this.moveTo(G,L+K);this.lineTo(G,L+J-K);this.quadraticCurveTo(G,L+J,G+I,L+J);this.lineTo(G+H-I,L+J);this.quadraticCurveTo(G+H,L+J,G+H,L+J-K);this.lineTo(G+H,L+K);this.quadraticCurveTo(G+H,L,G+H-I,L);this.lineTo(G+I,L);this.quadraticCurveTo(G,L,G,L+K);this._draw();},drawWedge:function(I,L,K,J,H,G){this._drawingComplete=false;this._width=H;this._height=H;G=G||H;this._path+=this._getWedgePath({x:I,y:L,startAngle:K,arc:J,radius:H,yRadius:G});this._width=H*2;this._height=this._width;this._shape="shape";this._draw();},_getWedgePath:function(J){var I=J.x,N=J.y,L=J.startAngle,K=J.arc,H=J.radius,G=J.yRadius||H,M;if(Math.abs(K)>360){K=360;}L*=-65535;K*=65536;M=" m "+I+" "+N+" ae "+I+" "+N+" "+H+" "+G+" "+L+" "+K;return M;},end:function(){if(this._shape){this._draw();}this._initProps();},lineGradientStyle:function(){},lineStyle:function(J,I,N,L,K,M,G,H){this._stroke=1;this._strokeWeight=J*0.7;this._strokeColor=I;},lineTo:function(L,K,I){var H=arguments,J,G;if(typeof L==="string"||typeof L==="number"){H=[[L,K]];}G=H.length;this._shape="shape";this._path+=" l ";for(J=0;J<G;++J){this._path+=" "+Math.round(H[J][0])+", "+Math.round(H[J][1]);this._trackSize.apply(this,H[J]);
}},moveTo:function(G,H){this._path+=" m "+Math.round(G)+", "+Math.round(H);},setSize:function(G,H){G=Math.round(G);H=Math.round(H);this.node.style.width=G+"px";this.node.style.height=H+"px";this.node.coordSize=G+" "+H;this._canvasWidth=G;this._canvasHeight=H;},setPosition:function(G,H){G=Math.round(G);H=Math.round(H);this.node.style.left=G+"px";this.node.style.top=H+"px";},render:function(G){var H=Math.max(G.offsetWidth||0,this._canvasWidth),I=Math.max(G.offsetHeight||0,this._canvasHeight);G=G||b.config.doc.body;G.appendChild(this.node);this.setSize(H,I);this._initProps();return this;},_shape:null,_trackSize:function(G,H){if(G>this._width){this._width=G;}if(H>this._height){this._height=H;}},_initProps:function(){this._fillColor=null;this._strokeColor=null;this._strokeWeight=0;this._fillProps=null;this._path="";this._width=0;this._height=0;this._x=0;this._y=0;this._fill=null;this._stroke=0;this._stroked=false;},_clearPath:function(){this._shape=null;this._path="";this._width=0;this._height=0;this._x=0;this._y=0;},_draw:function(){var I=this._createGraphicNode(this._shape),G=Math.round(this._width),J=Math.round(this._height),H=this._fillProps;this.setSize(G,J);if(this._path){if(this._fill||this._fillProps){this._path+=" x";}if(this._stroke){this._path+=" e";}I.path=this._path;I.coordSize=G+", "+J;}else{I.style.display="block";I.style.position="absolute";I.style.left=this._x+"px";I.style.top=this._y+"px";}if(this._fill){I.fillColor=this._fillColor;}else{I.filled=false;}if(this._stroke&&this._strokeWeight>0){I.strokeColor=this._strokeColor;I.strokeWeight=this._strokeWeight;}else{I.stroked=false;}I.style.width=G+"px";I.style.height=J+"px";if(H){I.filled=true;I.appendChild(this._getFill());}this.node.appendChild(I);this._clearPath();},_getFill:function(){var T=this._createGraphicNode("fill"),R=this._width,M=this._height,N=this._fillProps,H,S,K=0,G,Q="",O,L,P=Math.sqrt(Math.pow(R,2)+Math.pow(M,2)),J=50,I=50;if(this._gradientBox){J=Math.round((this._gradientBox.width/2-((this._x-this._gradientBox.tx)*P/R))/(R*R/P)*100);I=Math.round((this._gradientBox.height/2-((this._y-this._gradientBox.ty)*P/M))/(M*M/P)*100);N.focussize=(this._gradientBox.width/R)/10+" "+(this._gradientBox.height/M)/10;}if(N.colors){G=N.colors.concat();L=N.ratios.concat();O=G.length;for(;K<O;++K){S=L[K]||K/(O-1);S=Math.round(100*S)+"%";Q+=", "+S+" "+G[K];}if(parseInt(S,10)<100){Q+=", 100% "+G[O-1];}}for(H in N){if(N.hasOwnProperty(H)){T.setAttribute(H,N[H]);}}T.colors=Q.substr(2);if(N.type==="gradientradial"){T.focusposition=J+"%,"+I+"%";}return T;},_createGraphics:function(){var G=this._createGraphicNode("group");G.style.display="inline-block";G.style.position="absolute";return G;},_createGraphicNode:function(G){return document.createElement("<"+G+' xmlns="urn:schemas-microsft.com:vml" class="vml'+G+'"/>');},_getNodeShapeType:function(H){var G="shape";if(this._typeConversionHash.hasOwnProperty(H)){G=this._typeConversionHash[H];}return G;},_typeConversionHash:{circle:"oval",ellipse:"oval",rect:"rect"},getShape:function(G){G.graphic=this;return new b.Shape(G);},addChild:function(G){this.node.appendChild(G);}};if(b.UA.ie){var f=document.createStyleSheet();f.addRule(".vmlgroup","behavior:url(#default#VML)",f.rules.length);f.addRule(".vmlgroup","display:inline-block",f.rules.length);f.addRule(".vmlgroup","zoom:1",f.rules.length);f.addRule(".vmlshape","behavior:url(#default#VML)",f.rules.length);f.addRule(".vmlshape","display:inline-block",f.rules.length);f.addRule(".vmloval","behavior:url(#default#VML)",f.rules.length);f.addRule(".vmloval","display:inline-block",f.rules.length);f.addRule(".vmlrect","behavior:url(#default#VML)",f.rules.length);f.addRule(".vmlrect","display:block",f.rules.length);f.addRule(".vmlfill","behavior:url(#default#VML)",f.rules.length);b.Graphic=c;}else{var n="_yuid",h="nodeName",w=b.Node.prototype.addClass,t=b.Node.prototype.toString,y=b.NodeList.prototype.toString;b.Node.prototype.addClass=function(G){var H=this._node;if(H.tagName.indexOf("svg")>-1){if(H.className&&H.className.baseVal){H.className.baseVal=b.Lang.trim([H.className.baseVal,G].join(" "));}else{H.setAttribute("class",G);}}else{w.apply(this,arguments);}return this;};b.Node.prototype.toString=function(){var G=this._node,H;if(G&&G.className&&G.className.baseVal){if(typeof G.className.baseVal=="string"){H=G[h]+"."+G.className.baseVal.replace(" ",".");}else{H=this[n]+": not bound to any nodes";}}else{H=t.apply(this,arguments);}return H;};b.NodeList.prototype.toString=function(){var G=this._nodes,H,I;if(G&&G[0]){H=G[0];}if(H&&H.className&&H.className.baseVal){if(typeof H.className.baseVal=="string"){I=H[h];if(H.id){I+="#"+H.id;}I+="."+H.className.baseVal.replace(" ",".");}else{I=this[n]+": not bound to any nodes";}}else{I=y.apply(this,arguments);}return I;};b.NodeList.importMethod(b.Node.prototype,["addClass"]);}function k(G){this._initialize(G);this._draw();}b.extend(k,b.Graphic,{type:"shape",autoSize:false,pointerEvents:"visiblePainted",_initialize:function(G){if(!G.graphic){G.graphic=new b.Graphic();}this._setProps(G);},_setProps:function(G){this.autoSize=G.autoSize||this.autoSize;this.pointerEvents=G.pointerEvents||this.pointerEvents;this.width=G.width||this.width;this.height=G.height||this.height;this.border=G.border||this.border;this.graphics=G.graphic||this.graphics;this.canvas=this.graphics;this.parentNode=this.graphics.node;this.fill=G.fill||this.fill;this.type=G.shape||this.type;this.nodetype=this._getNodeShapeType(this.type);this.props=G.props||this.props;this.path=G.path||this.path;},_draw:function(){var H,N,K,J,G=this.parentNode,L=0,I=this.width||0,M=this.height||0;if(!this.node){this.node=this._createGraphicNode(this.nodetype,this.pointerEvents);G.appendChild(this.node);}if(this.nodetype=="path"){if(this.type=="wedge"){this.path=this._getWedgePath(this.props);}this._setPath();}if(this.border&&this.border.weight&&this.border.weight>0){L=this.border.weight;I-=L*2;M-=L*2;}this._addBorder();if(this.nodetype==="ellipse"){K=H=this.width/2;J=N=this.height/2;
K-=L;J-=L;this.node.setAttribute("cx",H);this.node.setAttribute("cy",N);this.node.setAttribute("rx",K);this.node.setAttribute("ry",J);}else{this.node.setAttribute("width",I);this.node.setAttribute("height",M);this.node.style.width=I+"px";this.node.style.height=M+"px";}this._addFill();G.style.width=this.width+"px";G.style.height=this.height+"px";G.setAttribute("width",this.width);G.setAttribute("height",this.height);this.node.style.visibility="visible";this.node.setAttribute("x",L);this.node.setAttribute("y",L);return this;},_setPath:function(){if(this.path){this.path+=" Z";this.node.setAttribute("d",this.path);}},_addBorder:function(){if(this.border&&this.border.weight&&this.border.weight>0){this.border.color=this.border.color||"#000000";this.border.weight=this.border.weight||1;this.border.alpha=this.border.alpha||1;this.border.linecap=this.border.linecap||"square";this.node.setAttribute("stroke",this.border.color);this.node.setAttribute("stroke-linecap",this.border.linecap);this.node.setAttribute("stroke-width",this.border.weight);this.node.setAttribute("stroke-opacity",this.border.alpha);}else{this.node.setAttribute("stroke","none");}},_addFill:function(){if(this.fill.type==="linear"||this.fill.type==="radial"){this.beginGradientFill(this.fill);this.node.appendChild(this._getFill());}else{if(this.fill.type==="bitmap"){this.beginBitmapFill(this.fill);this.node.appendChild(this._getFill());}else{if(!this.fill.color){this.node.setAttribute("fill","none");}else{this.fill.alpha=this.fill.alpha!==undefined?this.fill.alpha:1;this.node.setAttribute("fill",this.fill.color);this.node.setAttribute("fill-opacity",this.fill.alpha);}}}},end:function(){this._setPath();},update:function(G){this._setProps(G);this._draw();return this;},_getNodeShapeType:function(G){if(this._typeConversionHash.hasOwnProperty(G)){G=this._typeConversionHash[G];}return G;},toggleVisible:function(H){var G=H?"visible":"hidden";if(this.node){b.one(this.node).setStyle("visibility",G);}},_typeConversionHash:{circle:"ellipse",wedge:"path"}});b.Shape=k;function F(G){this._initialize(G);this._draw();}F.prototype={type:"shape",_initialize:function(G){if(!G.graphic){G.graphic=new b.Graphic();}this._setProps(G);},width:0,height:0,_setProps:function(G){this.width=G.width&&G.width>=0?G.width:this.width;this.height=G.height&&G.height>=0?G.height:this.height;this.border=G.border||this.border;this.graphics=G.graphic||this.graphics;this.canvas=this.graphics;this.parentNode=this.graphics.node;this.fill=G.fill||this.fill;this.type=G.shape||this.type;this.props=G.props||this.props;},_draw:function(){var H,I=0,G=this.width||0,J=this.height||0;this.graphics.setSize(G,J);if(this.node){this.node.style.visible="hidden";}else{if(!this.node){this.node=this.graphics._createGraphicNode(this.graphics._getNodeShapeType(this.type));this.graphics.node.appendChild(this.node);}}if(this.type==="wedge"){H=this.graphics._getWedgePath(this.props);if(this.fill){H+=" x";}if(this.border){H+=" e";}this.node.path=H;}this._addBorder();if(this.border&&this.border.weight&&this.border.weight>0){I=this.border.weight;G-=I;J-=I;}this.node.style.width=Math.max(G,0)+"px";this.node.style.height=Math.max(J,0)+"px";this._addFill();return this;},_addBorder:function(){if(this.border&&this.border.weight&&this.border.weight>0){this.node.strokecolor=this.border.color||"#000000";this.node.strokeweight=this.border.weight||1;this.node.stroked=true;}else{this.node.stroked=false;}},_addFill:function(){this.node.filled=true;if(this.fill.type==="linear"||this.fill.type==="radial"){this.graphics.beginGradientFill(this.fill);this.node.appendChild(this.graphics._getFill());}else{if(this.fill.type==="bitmap"){this.graphics.beginBitmapFill(this.fill);this.node.appendChild(this.graphics._getFill());}else{if(!this.fill.color){this.node.filled=false;}else{if(this.fillnode){this.graphics._removeChildren(this.fillnode);}this.fillnode=this.graphics._createGraphicNode("fill");this.fillnode.type="solid";this.fillnode.color=this.fill.color;this.fillnode.opacity=this.fill.alpha||1;this.node.appendChild(this.fillnode);}}}},toggleVisible:function(H){var G=H?"visible":"hidden";if(this.node){b.one(this.node).setStyle("visibility",G);}},update:function(G){this._setProps(G);this._draw();return this;}};b.VMLShape=F;if(b.UA.ie){b.Shape=F;}function s(G){this._createId();s.superclass.constructor.apply(this,arguments);}s.NAME="baseAxis";s.ATTRS={keys:{getter:function(){if(!this._keys){this._keys={};}return this._keys;},setter:function(I){var H,G;if(b.Lang.isArray(I)){G=I.length;for(H=0;H<G;++H){this.addKey(I[H]);}return;}for(H in I){if(I.hasOwnProperty(H)){this.addKey(I[H]);}}}},roundingUnit:{getter:function(){return this._roundingUnit;},setter:function(G){this._roundingUnit=G;if(this._roundMinAndMax){this._updateMinAndMax();}}},roundMinAndMax:{getter:function(){return this._roundMinAndMax;},setter:function(G){if(this._roundMinAndMax==G){return G;}this._roundMinAndMax=G;this._updateMinAndMax();}},dataType:{getter:function(){return this._dataType;}},dataProvider:{getter:function(){return this._dataProvider;},setter:function(K){if(K.hasOwnProperty("data")&&b.Lang.isArray(K.data)){K=b.merge(K);K=K.data;}this._dataProvider={data:K.concat()};this._dataClone=this._dataProvider.data.concat();var H=this.get("keyCollection"),J=this.get("keys"),I,G;if(J){for(I in J){if(J.hasOwnProperty(I)){delete J[I];}}}if(H&&H.length){I=0;G=H.length;for(;I<G;++I){this.addKey(H[I]);}}if(this._dataReady){this.fire("dataUpdate");}}},dataMaximum:{getter:function(){if(!this._dataMaximum){this._updateMinAndMax();}return this._dataMaximum;}},maximum:{getter:function(){if(this.get("autoMax")||!this._setMaximum){return this.get("dataMaximum");}return this._setMaximum;},setter:function(G){this._setMaximum=G;}},dataMinimum:{getter:function(){if(isNaN(this._dataMinimum)){this._updateMinAndMax();}return this._dataMinimum;}},minimum:{getter:function(){if(this.get("autoMin")||!this._setMinimum){return this.get("dataMinimum");}return this._setMinimum;},setter:function(G){this._setMinimum=G;
return G;}},autoMax:{value:true},autoMin:{value:true},data:{getter:function(){if(!this._data||this._updateTotalDataFlag){this._updateTotalData();}return this._data;}},keyCollection:{getter:function(){var I=this.get("keys"),H,G=[];for(H in I){if(I.hasOwnProperty(H)){G.push(H);}}return G;},readOnly:true},labelFunction:{value:function(H,G){return H;}}};b.extend(s,b.Base,{GUID:"yuibaseaxis",_createId:function(){this._id=b.guid(this.GUID);},_roundingUnit:NaN,_roundMinAndMax:true,_dataType:null,_dataProvider:null,_dataClone:null,_setMaximum:null,_dataMaximum:null,_setMinimum:null,_dataMinimum:null,_data:null,_keys:null,_updateTotalDataFlag:true,_dataReady:false,addKey:function(J){if(this.get("keys").hasOwnProperty(J)){return;}this._dataClone=this.get("dataProvider").data.concat();var I=this.get("keys"),G={},H={axis:this};this._setDataByKey(J);G[J]=I[J].concat();this._updateMinAndMax();H.keysAdded=G;if(!this._dataReady){this._dataReady=true;this.publish("dataReady",{fireOnce:true});this.fire("dataReady",H);}else{this.fire("dataUpdate",H);}},_setDataByKey:function(K){var J,L,H=[],I=this._dataClone.concat(),G=I.length;for(J=0;J<G;++J){L=I[J];H[J]=L[K];}this.get("keys")[K]=H;this._updateTotalDataFlag=true;},_updateTotalData:function(){var H=this.get("keys"),G;this._data=[];for(G in H){if(H.hasOwnProperty(G)){this._data=this._data.concat(H[G]);}}this._updateTotalDataFlag=false;},removeKey:function(M){if(!this.get("keys").hasOwnProperty(M)){return;}var H,N,G={},J=[],I={},L=this.get("keys"),K={};I[M]=L[M].concat();for(H in L){if(L.hasOwnProperty(H)){if(H==M){continue;}N=L[H];J=J.concat(N);G[H]=N;}}L=G;this._updateTotalDataFlag=true;this._updateMinAndMax();K.keysRemoved=I;this.fire("dataUpdate",K);},getKeyValueAt:function(H,G){var J=NaN,I=this.get("keys");if(I[H]&&I[H][G]){J=I[H][G];}return J;},getDataByKey:function(H){var G=this.get("keys");if(G[H]){return G[H];}return null;},_updateMinAndMax:function(){var L=this.get("data"),H=0,K=0,G,I,J;if(L&&L.length&&L.length>0){G=L.length;H=K=L[0];if(G>1){for(J=1;J<G;J++){I=L[J];if(isNaN(I)){continue;}H=Math.max(I,H);K=Math.min(I,K);}}}this._dataMaximum=H;this._dataMinimum=K;},getTotalMajorUnits:function(I,G){var H;if(I.determinant==="count"){H=I.count;}else{if(I.determinant==="distance"){H=(G/I.distance)+1;}}return H;},getMajorUnitDistance:function(G,J,H){var I;if(H.determinant==="count"){I=J/(G-1);}else{if(H.determinant==="distance"){I=H.distance;}}return I;},getEdgeOffset:function(H,G){return 0;},getLabelByIndex:function(K,H){var J=this.get("minimum"),G=this.get("maximum"),L=(G-J)/(H-1),I;H-=1;I=J+(K*L);return I;}});b.BaseAxis=s;function o(G){o.superclass.constructor.apply(this,arguments);}o.NAME="numericAxis";o.ATTRS={alwaysShowZero:{getter:function(){return this._alwaysShowZero;},setter:function(G){if(G==this._alwaysShowZero){return;}this._alwaysShowZero=G;this._updateMinAndMax();return G;}},labelFunction:{value:function(H,G){if(G){return b.DataType.Number.format(H,G);}return H;}},labelFormat:{value:{prefix:"",thousandsSeparator:"",decimalSeparator:"",decimalPlaces:"0",suffix:""}}};b.extend(o,b.BaseAxis,{_dataType:"numeric",_alwaysShowZero:true,_updateMinAndMax:function(){var M=this.get("data"),H=0,L=0,G,I,K,J;if(M&&M.length&&M.length>0){G=M.length;H=L=M[0];if(G>1){for(K=1;K<G;K++){I=M[K];if(isNaN(I)){if(b.Lang.isObject(I)){for(J in I){if(I.hasOwnProperty(J)){H=Math.max(I[J],H);L=Math.min(I[J],L);}}}continue;}H=Math.max(I,H);L=Math.min(I,L);}}}if(this._roundMinAndMax&&!isNaN(this.get("roundingUnit"))){this._dataMaximum=H===0?H:this._roundUpToNearest(H,this.get("roundingUnit"));if(L===0||(L>0&&L<this.get("roundingUnit"))){this._dataMinimum=0;}else{this._dataMinimum=this._roundDownToNearest(L,this.get("roundingUnit"));}}else{this._dataMaximum=H;this._dataMinimum=L;}if(this.get("alwaysShowZero")){this._dataMinimum=Math.min(0,this.get("dataMinimum"));}},_roundToNearest:function(I,H){H=H||1;if(H===0){return I;}var G=Math.round(this._roundToPrecision(I/H,10))*H;return this._roundToPrecision(G,10);},_roundUpToNearest:function(H,G){G=G||1;if(G===0){return H;}return Math.ceil(this._roundToPrecision(H/G,10))*G;},_roundDownToNearest:function(H,G){G=G||1;if(G===0){return H;}return Math.floor(this._roundToPrecision(H/G,10))*G;},_roundToPrecision:function(I,G){G=G||0;var H=Math.pow(10,G);return Math.round(H*I)/H;}});b.NumericAxis=o;function e(G){e.superclass.constructor.apply(this,arguments);}e.NAME="stackedAxis";b.extend(e,b.NumericAxis,{_updateMinAndMax:function(){var M=0,H=0,L=0,G=0,K=0,I=0,N,J,O=this.get("keys");for(N in O){if(O.hasOwnProperty(N)){K=Math.max(K,O[N].length);}}for(;I<K;++I){L=0;G=0;for(N in O){if(O.hasOwnProperty(N)){J=O[N][I];if(isNaN(J)){continue;}if(J>=0){L+=J;}else{G+=J;}}}if(L>0){M=Math.max(M,L);}else{M=Math.max(M,G);}if(G<0){H=Math.min(H,G);}else{H=Math.min(H,L);}}if(this._roundMinAndMax&&!isNaN(this.get("roundingUnit"))){this._dataMaximum=this._roundUpToNearest(M,this.get("roundingUnit"));this._dataMinimum=this._roundDownToNearest(H,this.get("roundingUnit"));}else{this._dataMaximum=M;this._dataMinimum=H;}if(this._alwaysShowZero&&H>0){this._dataMinimum=Math.min(0,this._dataMinimum);}}});b.StackedAxis=e;function d(G){d.superclass.constructor.apply(this,arguments);}d.NAME="timeAxis";d.ATTRS={maximum:{getter:function(){if(this.get("autoMax")||this._setMaximum===null){return this._getNumber(this.get("dataMaximum"));}return this._setMaximum;},setter:function(G){this._setMaximum=this._getNumber(G);this.fire("dataUpdate");}},minimum:{getter:function(){if(this.get("autoMin")||this._setMinimum===null){return this.get("dataMinimum");}return this._setMinimum;},setter:function(G){this._setMinimum=this._getNumber(G);this.fire("dataUpdate");}},labelFunction:{value:function(H,G){H=b.DataType.Date.parse(H);if(G){return b.DataType.Date.format(H,{format:G});}return H;}},labelFormat:{value:"%b %d, %y"}};b.extend(d,b.BaseAxis,{GUID:"yuitimeaxis",_dataType:"time",_setDataByKey:function(K){var L,H=[],J=this._dataClone.concat(),I,M,G=J.length;for(I=0;I<G;++I){L=J[I][K];
if(b.Lang.isDate(L)){M=L.valueOf();}else{if(!b.Lang.isNumber(L)){M=new Date(L.toString()).valueOf();}else{M=L;}}H[I]=M;}this.get("keys")[K]=H;this._updateTotalDataFlag=true;},_getNumber:function(G){if(b.Lang.isDate(G)){G=G.valueOf();}else{if(!b.Lang.isNumber(G)){G=new Date(G.toString()).valueOf();}}return G;}});b.TimeAxis=d;function g(G){g.superclass.constructor.apply(this,arguments);}g.NAME="categoryAxis";b.extend(g,b.BaseAxis,{_indices:null,GUID:"yuicategoryaxis",_dataType:"category",_updateMinAndMax:function(){this._dataMaximum=Math.max(this.get("data").length-1,0);this._dataMinimum=0;},_setDataByKey:function(K){var J,L,H=[],M=[],I=this._dataClone.concat(),G=I.length;if(!this._indices){this._indices={};}for(J=0;J<G;++J){L=I[J];H[J]=J;M[J]=L[K];}this._indices[K]=H;this.get("keys")[K]=M.concat();this._updateTotalDataFlag=true;},getDataByKey:function(H){if(!this._indices){this.get("keys");}var G=this._indices;if(G[H]){return G[H];}return null;},getTotalMajorUnits:function(H,G){return this.get("data").length;},getMajorUnitDistance:function(G,J,H){var I;if(H.determinant==="count"){I=J/G;}else{if(H.determinant==="distance"){I=H.distance;}}return I;},getEdgeOffset:function(H,G){return G/H;},getLabelByIndex:function(H,G,I){return this.get("data")[H];},getLabelAtPosition:function(K,G,J){var I=this.get("data").length-1,H=Math.round(K/(G/I));return this.get("data")[H];}});b.CategoryAxis=g;function x(){}x.ATTRS={styles:{getter:function(){this._styles=this._styles||this._getDefaultStyles();return this._styles;},setter:function(G){this._styles=this._setStyles(G);}},graphic:{}};x.NAME="renderer";x.prototype={_styles:null,_setStyles:function(H){var G=this.get("styles");return this._mergeStyles(H,G);},_mergeStyles:function(H,G){if(!G){G={};}var I=b.merge(G,{});b.Object.each(H,function(L,K,J){if(G.hasOwnProperty(K)&&b.Lang.isObject(L)&&!b.Lang.isArray(L)){I[K]=this._mergeStyles(L,G[K]);}else{I[K]=L;}},this);return I;},_getDefaultStyles:function(){return{padding:{top:0,right:0,bottom:0,left:0}};}};b.augment(x,b.Attribute);b.Renderer=x;function l(){}l.prototype={getCurveControlPoints:function(J,M){var K=[],I=1,H=J.length-1,G=[],L=[];if(H<1){return null;}K[0]={startx:J[0],starty:M[0],endx:J[1],endy:M[1]};if(H===1){K[0].ctrlx1=(2*J[0]+J[1])/3;K[0].ctrly2=(2*M[0]+M[1])/3;K[0].ctrlx2=2*K[0].ctrlx1-J[0];K[0].ctrly2=2*K[0].ctrly1-M[0];return K;}for(;I<H;++I){K.push({startx:Math.round(J[I]),starty:Math.round(M[I]),endx:Math.round(J[I+1]),endy:Math.round(M[I+1])});G[I]=4*J[I]+2*J[I+1];L[I]=4*M[I]+2*M[I+1];}G[0]=J[0]+(2*J[1]);G[H-1]=(8*J[H-1]+J[H])/2;G=this.getControlPoints(G.concat());L[0]=M[0]+(2*M[1]);L[H-1]=(8*M[H-1]+M[H])/2;L=this.getControlPoints(L.concat());for(I=0;I<H;++I){K[I].ctrlx1=Math.round(G[I]);K[I].ctrly1=Math.round(L[I]);if(I<H-1){K[I].ctrlx2=Math.round(2*J[I+1]-G[I+1]);K[I].ctrly2=Math.round(2*M[I+1]-L[I+1]);}else{K[I].ctrlx2=Math.round((J[H]+G[H-1])/2);K[I].ctrly2=Math.round((M[H]+L[H-1])/2);}}return K;},getControlPoints:function(L){var I=L.length,H=[],K=[],G=2,J=1;H[0]=L[0]/G;for(;J<I;++J){K[J]=1/G;G=(J<I-1?4:3.5)-K[J];H[J]=(L[J]-H[J-1])/G;}for(J=1;J<I;++J){H[I-J-1]-=K[I-J]*H[I-J];}return H;}};b.CurveUtil=l;function j(){}j.prototype={_stackCoordinates:function(){var Q=this.get("direction"),I=this.get("order"),O=this.get("type"),R=this.get("graph"),L=R.get("height"),H=R.seriesTypes[O],K=0,N,P=this.get("xcoords"),J=this.get("ycoords"),M,G;if(I===0){return;}M=H[I-1].get("xcoords").concat();G=H[I-1].get("ycoords").concat();if(Q==="vertical"){N=M.length;for(;K<N;++K){if(!isNaN(M[K])&&!isNaN(P[K])){P[K]+=M[K];}}}else{N=G.length;for(;K<N;++K){if(!isNaN(G[K])&&!isNaN(J[K])){J[K]=G[K]-(L-J[K]);}}}}};b.StackingUtil=j;function i(){}i.prototype={_lineDefaults:null,drawLines:function(){if(this.get("xcoords").length<1){return;}var O=this.get("xcoords").concat(),aa=this.get("ycoords").concat(),W=this.get("direction"),S=W==="vertical"?aa.length:O.length,I,H,Z=I,X=H,V,T,R,K=this.get("styles").line,U=K.lineType,P=K.color||this._getDefaultColor(this.get("graphOrder"),"line"),Y=K.dashLength,M=K.gapSpace,L=K.connectDiscontinuousPoints,G=K.discontinuousType,J=K.discontinuousDashLength,Q=K.discontinuousGapSpace,N=this.get("graphic");I=Z=O[0];H=X=aa[0];N.lineStyle(K.weight,P);N.moveTo(I,H);for(R=1;R<S;R=++R){V=O[R];T=aa[R];if(isNaN(T)){Z=V;X=T;continue;}if(Z==I){if(U!="dashed"){N.lineTo(V,T);}else{this.drawDashedLine(Z,X,V,T,Y,M);}}else{if(!L){N.moveTo(V,T);}else{if(G!="solid"){this.drawDashedLine(Z,X,V,T,J,Q);}else{N.lineTo(V,T);}}}I=Z=V;H=X=T;}N.end();},drawSpline:function(){if(this.get("xcoords").length<1){return;}var Q=this.get("xcoords"),L=this.get("ycoords"),S=this.getCurveControlPoints(Q,L),M=S.length,O,N,I,H,R,P,K=0,T=this.get("styles").line,G=this.get("graphic"),J=T.color||this._getDefaultColor(this.get("graphOrder"),"line");G.lineStyle(T.weight,J);G.moveTo(Q[0],L[0]);for(;K<M;K=++K){R=S[K].endx;P=S[K].endy;O=S[K].ctrlx1;N=S[K].ctrlx2;I=S[K].ctrly1;H=S[K].ctrly2;G.curveTo(O,I,N,H,R,P);}G.end();},drawDashedLine:function(R,V,H,T,J,I){J=J||10;I=I||10;var L=J+I,O=H-R,S=T-V,U=Math.sqrt(Math.pow(O,2)+Math.pow(S,2)),M=Math.floor(Math.abs(U/L)),K=Math.atan2(S,O),Q=R,P=V,N,G=this.get("graphic");O=Math.cos(K)*L;S=Math.sin(K)*L;for(N=0;N<M;++N){G.moveTo(Q,P);G.lineTo(Q+Math.cos(K)*J,P+Math.sin(K)*J);Q+=O;P+=S;}G.moveTo(Q,P);U=Math.sqrt((H-Q)*(H-Q)+(T-P)*(T-P));if(U>J){G.lineTo(Q+Math.cos(K)*J,P+Math.sin(K)*J);}else{if(U>0){G.lineTo(Q+Math.cos(K)*U,P+Math.sin(K)*U);}}G.moveTo(H,T);},_getLineDefaults:function(){return{alpha:1,weight:6,lineType:"solid",dashLength:10,gapSpace:10,connectDiscontinuousPoints:true,discontinuousType:"solid",discontinuousDashLength:10,discontinuousGapSpace:10};}};b.augment(i,b.Attribute);b.Lines=i;function D(G){var H={area:{getter:function(){return this._defaults||this._getAreaDefaults();},setter:function(J){var I=this._defaults||this._getAreaDefaults();this._defaults=b.merge(I,J);}}};this.addAttrs(H,G);this.get("styles");}D.prototype={drawFill:function(P,L){if(P.length<1){return;}var O=P.length,I=P[0],H=L[0],N=I,M=H,S,R,K=1,Q=this.get("styles").area,G=this.get("graphic"),J=Q.color||this._getDefaultColor(this.get("graphOrder"),"slice");
G.clear();G.beginFill(J,Q.alpha);G.moveTo(I,H);for(;K<O;K=++K){S=P[K];R=L[K];if(isNaN(R)){N=S;M=R;continue;}G.lineTo(S,R);N=S;M=R;}G.end();},drawAreaSpline:function(){if(this.get("xcoords").length<1){return;}var S=this.get("xcoords"),N=this.get("ycoords"),U=this.getCurveControlPoints(S,N),O=U.length,Q,P,K,J,T,R,M=0,I=S[0],H=N[0],V=this.get("styles").area,G=this.get("graphic"),L=V.color||this._getDefaultColor(this.get("graphOrder"),"slice");G.beginFill(L,V.alpha);G.moveTo(I,H);for(;M<O;M=++M){T=U[M].endx;R=U[M].endy;Q=U[M].ctrlx1;P=U[M].ctrlx2;K=U[M].ctrly1;J=U[M].ctrly2;G.curveTo(Q,K,P,J,T,R);}if(this.get("direction")==="vertical"){G.lineTo(this._leftOrigin,R);G.lineTo(this._leftOrigin,H);}else{G.lineTo(T,this._bottomOrigin);G.lineTo(I,this._bottomOrigin);}G.lineTo(I,H);G.end();},drawStackedAreaSpline:function(){if(this.get("xcoords").length<1){return;}var R=this.get("xcoords"),ab=this.get("ycoords"),P,W=this.get("order"),I=this.get("type"),G=this.get("graph"),J=G.seriesTypes[I],H,U,Y,T,S,aa,Z,N,L,X=0,O,M,K=this.get("styles").area,Q=this.get("graphic"),V=K.color||this._getDefaultColor(this.get("graphOrder"),"slice");O=R[0];M=ab[0];P=this.getCurveControlPoints(R,ab);Y=P.length;Q.beginFill(V,K.alpha);Q.moveTo(O,M);for(;X<Y;X=++X){N=P[X].endx;L=P[X].endy;T=P[X].ctrlx1;S=P[X].ctrlx2;aa=P[X].ctrly1;Z=P[X].ctrly2;Q.curveTo(T,aa,S,Z,N,L);}if(W>0){H=J[W-1].get("xcoords").concat().reverse();U=J[W-1].get("ycoords").concat().reverse();P=this.getCurveControlPoints(H,U);X=0;Y=P.length;Q.lineTo(H[0],U[0]);for(;X<Y;X=++X){N=P[X].endx;L=P[X].endy;T=P[X].ctrlx1;S=P[X].ctrlx2;aa=P[X].ctrly1;Z=P[X].ctrly2;Q.curveTo(T,aa,S,Z,N,L);}}else{if(this.get("direction")==="vertical"){Q.lineTo(this._leftOrigin,ab[ab.length-1]);Q.lineTo(this._leftOrigin,M);}else{Q.lineTo(R[R.length-1],this._bottomOrigin);Q.lineTo(O,this._bottomOrigin);}}Q.lineTo(O,M);Q.end();},_defaults:null,_getClosingPoints:function(){var G=this.get("xcoords").concat(),H=this.get("ycoords").concat();if(this.get("direction")==="vertical"){G.push(this._leftOrigin);G.push(this._leftOrigin);H.push(H[H.length-1]);H.push(H[0]);}else{G.push(G[G.length-1]);G.push(G[0]);H.push(this._bottomOrigin);H.push(this._bottomOrigin);}G.push(G[0]);H.push(H[0]);return[G,H];},_getStackedClosingPoints:function(){var K=this.get("order"),N=this.get("type"),Q=this.get("graph"),O=this.get("direction"),I=Q.seriesTypes[N],M,J,P=this.get("xcoords").concat(),L=this.get("ycoords").concat(),H=P[0],G=L[0];if(K>0){M=I[K-1].get("xcoords").concat();J=I[K-1].get("ycoords").concat();P=P.concat(M.concat().reverse());L=L.concat(J.concat().reverse());P.push(P[0]);L.push(L[0]);}else{if(O==="vertical"){P.push(this._leftOrigin);P.push(this._leftOrigin);L.push(L[L.length-1]);L.push(G);}else{P.push(P[P.length-1]);P.push(H);L.push(this._bottomOrigin);L.push(this._bottomOrigin);}}return[P,L];},_getAreaDefaults:function(){return{};}};b.augment(D,b.Attribute);b.Fills=D;function C(G){var H={markers:{getter:function(){return this._markers;}}};this.addAttrs(H,G);}C.prototype={_plotDefaults:null,drawPlots:function(){if(!this.get("xcoords")||this.get("xcoords").length<1){return;}var H=b.clone(this.get("styles").marker),V=H.width,N=H.height,T=this.get("xcoords"),L=this.get("ycoords"),M=0,O=T.length,S=L[0],J,K,U,P=V/2,I=N/2,R=null,Q=null,G=this.get("graphOrder");if(b.Lang.isArray(H.fill.color)){R=H.fill.color.concat();}if(b.Lang.isArray(H.border.color)){Q=H.border.colors.concat();}this._createMarkerCache();for(;M<O;++M){S=(L[M]-I);J=(T[M]-P);if(!S||!J||S===undefined||J===undefined||S=="undefined"||J=="undefined"||isNaN(S)||isNaN(J)){this._markers.push(null);this._markerNodes.push(null);this._graphicCollection.push(null);this._graphicNodes.push(null);continue;}S+="px";J+="px";if(R){H.fill.color=R[M%R.length];}if(Q){H.border.colors=Q[M%Q.length];}K=this.getMarker(H,G,M);U=b.one(K.parentNode);U.setStyle("position","absolute");U.setStyle("top",S);U.setStyle("left",J);}this._clearMarkerCache();},_getPlotDefaults:function(){var G={fill:{type:"solid",alpha:1,colors:null,alphas:null,ratios:null},border:{weight:1,alpha:1},width:10,height:10,shape:"circle"};G.fill.color=this._getDefaultColor(this.get("graphOrder"),"fill");G.border.color=this._getDefaultColor(this.get("graphOrder"),"border");return G;},_markers:null,_markerCache:null,getMarker:function(K,G,J){var I,L,H;if(this._markerCache.length>0){while(!I){I=this._markerCache.shift();}I.update(K);}else{L=new b.Graphic();L.render(this.get("graph").get("contentBox"));L.node.setAttribute("id","markerParent_"+G+"_"+J);H=b.clone(K);I=L.getShape(H);b.one(I.node).addClass("yui3-seriesmarker");I.node.setAttribute("id","series_"+G+"_"+J);L.render(this.get("graph").get("contentBox"));}this._markers.push(I);this._markerNodes.push(b.one(I.node));this._graphicCollection.push(L);this._graphicNodes.push(I.parentNode);return I;},_createMarkerCache:function(){if(this._markers&&this._markers.length>0){this._markerCache=this._markers.concat();}else{this._markerCache=[];}this._markers=[];this._graphicNodes=[];this._markerNodes=[];this._graphicCollection=[];},_clearMarkerCache:function(){var G=this._markerCache.length,I=0,J,H;for(;I<G;++I){H=this._markerCache[I];if(H){J=H.graphics;J.destroy();}}this._markerCache=[];},updateMarkerState:function(N,K){if(this._markers[K]){var P,M,H,Q=b.clone(this.get("styles").marker),G=this._getState(N),O=this.get("xcoords"),J=this.get("ycoords"),I=this._markers[K],L=I.parentNode;H=G=="off"||!Q[G]?Q:Q[G];H.fill.color=this._getItemColor(H.fill.color,K);H.border.color=this._getItemColor(H.border.color,K);I.update(H);P=H.width;M=H.height;L.style.left=(O[K]-P/2)+"px";L.style.top=(J[K]-M/2)+"px";I.toggleVisible(this.get("visible"));}},_getItemColor:function(H,G){if(b.Lang.isArray(H)){return H[G%H.length];}return H;},_setStyles:function(G){G=this._parseMarkerStyles(G);return b.Renderer.prototype._setStyles.apply(this,[G]);},_parseMarkerStyles:function(H){if(H.marker){var G=this._getPlotDefaults();H.marker=this._mergeStyles(H.marker,G);if(H.marker.over){H.marker.over=this._mergeStyles(H.marker.over,H.marker);
}if(H.marker.down){H.marker.down=this._mergeStyles(H.marker.down,H.marker);}}return H;},_getState:function(G){var H;switch(G){case"mouseout":H="off";break;case"mouseover":H="over";break;case"mouseup":H="over";break;case"mousedown":H="down";break;}return H;},_toggleVisible:function(J){var M=this.get("graphic"),L=this.get("markers"),I=0,G,K=this.get("visible"),H;if(M){M.toggleVisible(K);}if(L){G=L.length;for(;I<G;++I){H=L[I];if(H){H.toggleVisible(K);}}}},_stateSyles:null};b.augment(C,b.Attribute);b.Plots=C;function E(){}E.prototype={drawSeries:function(){if(this.get("xcoords").length<1){return;}var ac=b.clone(this.get("styles").marker),ad,W,T=this.get("xcoords"),ag=this.get("ycoords"),Z=0,aa=T.length,U=ag[0],I=this.get("type"),H=this.get("graph"),P=H.seriesTypes[I],ab=P.length,R=0,S=0,L=0,O,X,Y=this.get("order"),Q=this.get("graphOrder"),K,N,V,J,af,G=null,M=null,ae;if(b.Lang.isArray(ac.fill.color)){G=ac.fill.color.concat();}if(b.Lang.isArray(ac.border.color)){M=ac.border.colors.concat();}if(this.get("direction")=="vertical"){V="height";J="width";}else{V="width";J="height";}ad=ac[V];W=ac[J];this._createMarkerCache();for(;Z<ab;++Z){X=P[Z];R+=X.get("styles").marker[V];if(Y>Z){L=R;}}S=aa*R;if(S>H.get(V)){O=H.get(V)/S;R*=O;L*=O;ad*=O;ad=Math.max(ad,1);}L-=R/2;for(Z=0;Z<aa;++Z){af=this._getMarkerDimensions(T[Z],ag[Z],W,L);U=af.top;W=af.calculatedSize;K=af.left;ac[V]=ad;ac[J]=W;if(G){ac.fill.color=G[Z%G.length];}if(M){ac.border.colors=M[Z%M.length];}N=this.getMarker(ac,Q,Z);ae=b.one(N.parentNode);ae.setStyle("position","absolute");ae.setStyle("top",U);ae.setStyle("left",K);}this._clearMarkerCache();},_defaultFillColors:["#66007f","#a86f41","#295454","#996ab2","#e8cdb7","#90bdbd","#000000","#c3b8ca","#968373","#678585"],_getPlotDefaults:function(){var G={fill:{type:"solid",alpha:1,colors:null,alphas:null,ratios:null},border:{weight:0,alpha:1},width:12,height:12,shape:"rect",padding:{top:0,left:0,right:0,bottom:0}};G.fill.color=this._getDefaultColor(this.get("graphOrder"),"fill");G.border.color=this._getDefaultColor(this.get("graphOrder"),"border");return G;}};b.Histogram=E;b.CartesianSeries=b.Base.create("cartesianSeries",b.Base,[b.Renderer],{_xDisplayName:null,_yDisplayName:null,_leftOrigin:null,_bottomOrigin:null,render:function(){this._setCanvas();this.addListeners();this.set("rendered",true);this.validate();},addListeners:function(){var H=this.get("xAxis"),G=this.get("yAxis");if(H){H.after("dataReady",b.bind(this._xDataChangeHandler,this));H.after("dataUpdate",b.bind(this._xDataChangeHandler,this));}if(G){G.after("dataReady",b.bind(this._yDataChangeHandler,this));G.after("dataUpdate",b.bind(this._yDataChangeHandler,this));}this.after("xAxisChange",this._xAxisChangeHandler);this.after("yAxisChange",this._yAxisChangeHandler);this.after("stylesChange",function(J){var I=this._updateAxisData();if(I){this.draw();}});this.after("widthChange",function(J){var I=this._updateAxisData();if(I){this.draw();}});this.after("heightChange",function(J){var I=this._updateAxisData();if(I){this.draw();}});this.after("visibleChange",this._toggleVisible);},_xAxisChangeHandler:function(H){var G=this.get("xAxis");G.after("dataReady",b.bind(this._xDataChangeHandler,this));G.after("dataUpdate",b.bind(this._xDataChangeHandler,this));},_yAxisChangeHandler:function(H){var G=this.get("yAxis");G.after("dataReady",b.bind(this._yDataChangeHandler,this));G.after("dataUpdate",b.bind(this._yDataChangeHandler,this));},GUID:"yuicartesianseries",_xDataChangeHandler:function(G){var H=this._updateAxisData();if(H){this.draw();}},_yDataChangeHandler:function(G){var H=this._updateAxisData();if(H){this.draw();}},_updateAxisData:function(){var K=this.get("xAxis"),H=this.get("yAxis"),I=this.get("xKey"),G=this.get("yKey"),J,L;if(!K||!H||!I||!G){return false;}L=K.getDataByKey(I);J=H.getDataByKey(G);if(!L||!J){return false;}this.set("xData",L);this.set("yData",J);return true;},validate:function(){if((this.get("xData")&&this.get("yData"))||this._updateAxisData()){this.draw();}},_setCanvas:function(){this.set("graphic",new b.Graphic());this.get("graphic").render(this.get("graph").get("contentBox"));},setAreaData:function(){var ai,ag,K=this.get("graph"),T=K.get("width"),ac=K.get("height"),R=this.get("xAxis"),H=this.get("yAxis"),M=this.get("xData").concat(),ae=this.get("yData").concat(),al=R.getEdgeOffset(M.length,T),Q=H.getEdgeOffset(ae.length,ac),W=this.get("styles").padding,Z=W.left,af=W.top,O=T-(Z+W.right+al),ab=ac-(af+W.bottom+Q),X=[],ak=[],aj=R.get("maximum"),ad=R.get("minimum"),J=H.get("maximum"),G=H.get("minimum"),N=O/(aj-ad),U=ab/(J-G),P,ah=this.get("direction"),aa=0,S=[],Y=[],L=this.get("xMarkerPlaneOffset"),I=this.get("yMarkerPlaneOffset"),V=this.get("graphic");P=M.length;al*=0.5;Q*=0.5;if(ah==="vertical"){ae=ae.reverse();}if(V){V.setSize(T,ac);}this._leftOrigin=Math.round(((0-ad)*N)+Z+al);this._bottomOrigin=Math.round((ab+af+Q)-(0-G)*U);for(;aa<P;++aa){ai=Math.round((((M[aa]-ad)*N)+Z+al));ag=Math.round(((ab+af+Q)-(ae[aa]-G)*U));X.push(ai);ak.push(ag);S.push({start:ai-L,end:ai+L});Y.push({start:ag-I,end:ag+I});}this.set("xcoords",X);this.set("ycoords",ak);this.set("xMarkerPlane",S);this.set("yMarkerPlane",Y);},draw:function(){var I=this.get("graph"),G=I.get("width"),H=I.get("height");if(this.get("rendered")){if((isFinite(G)&&isFinite(H)&&G>0&&H>0)&&((this.get("xData")&&this.get("yData"))||this._updateAxisData())){this.setAreaData();this.drawSeries();this._toggleVisible(this.get("visible"));this.fire("drawingComplete");}}},_defaultPlaneOffset:4,_getDefaultStyles:function(){return{padding:{top:0,left:0,right:0,bottom:0}};},_defaultLineColors:["#426ab3","#d09b2c","#000000","#b82837","#b384b5","#ff7200","#779de3","#cbc8ba","#7ed7a6","#007a6c"],_defaultFillColors:["#6084d0","#eeb647","#6c6b5f","#d6484f","#ce9ed1","#ff9f3b","#93b7ff","#e0ddd0","#94ecba","#309687"],_defaultBorderColors:["#205096","#b38206","#000000","#94001e","#9d6fa0","#e55b00","#5e85c9","#adab9e","#6ac291","#006457"],_defaultSliceColors:["#66007f","#a86f41","#295454","#996ab2","#e8cdb7","#90bdbd","#000000","#c3b8ca","#968373","#678585"],_getDefaultColor:function(J,K){var H={line:this._defaultLineColors,fill:this._defaultFillColors,border:this._defaultBorderColors,slice:this._defaultSliceColors},I=H[K],G=I.length;
J=J||0;if(J>=G){J=J%G;}K=K||"fill";return H[K][J];},_toggleVisible:function(G){var H=this.get("graphic");if(H){H.toggleVisible(this.get("visible"));}}},{ATTRS:{xDisplayName:{getter:function(){return this._xDisplayName||this.get("xKey");},setter:function(G){this._xDisplayName=G;return G;}},yDisplayName:{getter:function(){return this._yDisplayName||this.get("yKey");},setter:function(G){this._yDisplayName=G;return G;}},categoryDisplayName:{readOnly:true,getter:function(){return this.get("direction")=="vertical"?this.get("yDisplayName"):this.get("xDisplayName");}},valueDisplayName:{readOnly:true,getter:function(){return this.get("direction")=="vertical"?this.get("xDisplayName"):this.get("yDisplayName");}},type:{value:"cartesian"},order:{},graphOrder:{},xcoords:{},ycoords:{},graph:{},xAxis:{},yAxis:{},xKey:{},yKey:{},xData:{},yData:{},rendered:{value:false},width:{readOnly:true,getter:function(){this.get("graph").get("width");}},height:{readOnly:true,getter:function(){this.get("graph").get("height");}},visible:{value:true},xMarkerPlane:{},yMarkerPlane:{},xMarkerPlaneOffset:{getter:function(){var G=this.get("styles").marker;if(G&&G.width&&isFinite(G.width)){return G.width*0.5;}return this._defaultPlaneOffset;}},yMarkerPlaneOffset:{getter:function(){var G=this.get("styles").marker;if(G&&G.height&&isFinite(G.height)){return G.height*0.5;}return this._defaultPlaneOffset;}},direction:{value:"horizontal"}}});b.MarkerSeries=b.Base.create("markerSeries",b.CartesianSeries,[b.Plots],{renderUI:function(){this._setNode();},drawSeries:function(){this.drawPlots();},_setStyles:function(G){if(!G.marker){G={marker:G};}G=this._parseMarkerStyles(G);return b.MarkerSeries.superclass._mergeStyles.apply(this,[G,this._getDefaultStyles()]);},_getDefaultStyles:function(){var G=this._mergeStyles({marker:this._getPlotDefaults()},b.MarkerSeries.superclass._getDefaultStyles());return G;}},{ATTRS:{type:{value:"marker"}}});b.PieSeries=b.Base.create("pieSeries",b.MarkerSeries,[],{_categoryDisplayName:null,_valueDisplayName:null,addListeners:function(){var G=this.get("categoryAxis"),H=this.get("valueAxis");if(G){G.after("dataReady",b.bind(this._categoryDataChangeHandler,this));G.after("dataUpdate",b.bind(this._categoryDataChangeHandler,this));}if(H){H.after("dataReady",b.bind(this._valueDataChangeHandler,this));H.after("dataUpdate",b.bind(this._valueDataChangeHandler,this));}this.after("categoryAxisChange",this.categoryAxisChangeHandler);this.after("valueAxisChange",this.valueAxisChangeHandler);this.after("stylesChange",this._updateHandler);},validate:function(){this.draw();this._renderered=true;},_categoryAxisChangeHandler:function(G){var H=this.get("categoryAxis");H.after("dataReady",b.bind(this._categoryDataChangeHandler,this));H.after("dataUpdate",b.bind(this._categoryDataChangeHandler,this));},_valueAxisChangeHandler:function(G){var H=this.get("valueAxis");H.after("dataReady",b.bind(this._valueDataChangeHandler,this));H.after("dataUpdate",b.bind(this._valueDataChangeHandler,this));},GUID:"pieseries",_categoryDataChangeHandler:function(G){if(this._rendered&&this.get("categoryKey")&&this.get("valueKey")){this.draw();}},_valueDataChangeHandler:function(G){if(this._rendered&&this.get("categoryKey")&&this.get("valueKey")){this.draw();}},draw:function(){var I=this.get("graph"),G=I.get("width"),H=I.get("height");if(isFinite(G)&&isFinite(H)&&G>0&&H>0){this._rendered=true;this.drawSeries();this.fire("drawingComplete");}},drawPlots:function(){var I=this.get("valueAxis").getDataByKey(this.get("valueKey")).concat(),J=this.get("categoryAxis").getDataByKey(this.get("categoryKey")).concat(),M=0,aj=I.length,T=this.get("styles").marker,G=T.fill.colors,ak=T.fill.alphas||["1"],Q=T.border.colors,K=[T.border.weight],L=[T.border.alpha],am=K.concat(),V=Q.concat(),X=L.concat(),ag,ai,Y=T.padding,H=this.get("graph"),W=H.get("width")-(Y.left+Y.right),af=H.get("height")-(Y.top+Y.bottom),ad=-90,R=W/2,Z=af/2,N=Math.min(R,Z),ae=0,ab,ah=0,aa,ac,O,U,P,S=this.get("graphOrder"),al;for(;ae<aj;++ae){ab=I[ae];I.push(ab);if(!isNaN(ab)){M+=ab;}}ag=G?G.concat():null;ai=ak?ak.concat():null;this._createMarkerCache();for(ae=0;ae<aj;ae++){ab=I[ae];if(M===0){ah=360/I.length;}else{ah=360*(ab/M);}ah=Math.round(ah);if(ag&&ag.length<1){ag=G.concat();}if(ai&&ai.length<1){ai=ak.concat();}if(am&&am.length<1){am=K.concat();}if(am&&V.length<1){V=Q.concat();}if(X&&X.length<1){X=L.concat();}O=am?am.shift():null;aa=V?V.shift():null;ac=X?X.shift():null;ad+=ah;U={border:{color:aa,weight:O,alpha:ac},fill:{color:ag?ag.shift():this._getDefaultColor(ae,"slice"),alpha:ai?ai.shift():null},shape:"wedge",props:{arc:ah,radius:N,startAngle:ad,x:R,y:Z},width:W,height:af};P=this.getMarker(U,S,ae);al=b.one(P.parent);}this._clearMarkerCache();},updateMarkerState:function(L,I){var N=this._getState(L),H,K,G=this._markers[I],J=this._graphicNodes[I],M=this.get("styles").marker;H=N=="off"||!M[N]?M:M[N];K=this._mergeStyles(H,{});K.fill.color=K.fill.colors[I%K.fill.colors.length];K.fill.alpha=K.fill.alphas[I%K.fill.alphas.length];G.update(K);if(N=="over"||N=="down"){b.one(J).setStyle("zIndex",3);}else{b.one(J).setStyle("zIndex",2);}},_getPlotDefaults:function(){var G={padding:{top:0,left:0,right:0,bottom:0},fill:{alphas:["1"]},border:{weight:0,alpha:1}};G.fill.colors=this._defaultSliceColors;G.border.colors=this._defaultBorderColors;return G;},_defaultLineColors:["#426ab3","#d09b2c","#000000","#b82837","#b384b5","#ff7200","#779de3","#cbc8ba","#7ed7a6","#007a6c"],_defaultFillColors:["#6084d0","#eeb647","#6c6b5f","#d6484f","#ce9ed1","#ff9f3b","#93b7ff","#e0ddd0","#94ecba","#309687"],_defaultBorderColors:["#205096","#b38206","#000000","#94001e","#9d6fa0","#e55b00","#5e85c9","#adab9e","#6ac291","#006457"],_defaultSliceColors:["#66007f","#a86f41","#295454","#996ab2","#e8cdb7","#90bdbd","#000000","#c3b8ca","#968373","#678585"],_getDefaultColor:function(J,K){var H={line:this._defaultLineColors,fill:this._defaultFillColors,border:this._defaultBorderColors,slice:this._defaultSliceColors},I=H[K],G=I.length;J=J||0;
if(J>=G){J=J%G;}K=K||"fill";return H[K][J];}},{ATTRS:{type:{value:"pie"},order:{},graph:{},categoryAxis:{value:null,validator:function(G){return G!==this.get("categoryAxis");}},valueAxis:{value:null,validator:function(G){return G!==this.get("valueAxis");}},categoryKey:{value:null,validator:function(G){return G!==this.get("categoryKey");}},valueKey:{value:null,validator:function(G){return G!==this.get("valueKey");}},categoryDisplayName:{setter:function(G){this._categoryDisplayName=G;return G;},getter:function(){return this._categoryDisplayName||this.get("categoryKey");}},valueDisplayName:{setter:function(G){this._valueDisplayName=G;return G;},getter:function(){return this._valueDisplayName||this.get("valueKey");}},slices:null}});b.LineSeries=b.Base.create("lineSeries",b.CartesianSeries,[b.Lines],{drawSeries:function(){this.get("graphic").clear();this.drawLines();},_setStyles:function(G){if(!G.line){G={line:G};}return b.LineSeries.superclass._setStyles.apply(this,[G]);},_getDefaultStyles:function(){var G=this._mergeStyles({line:this._getLineDefaults()},b.LineSeries.superclass._getDefaultStyles());return G;}},{ATTRS:{type:{value:"line"}}});b.SplineSeries=b.Base.create("splineSeries",b.CartesianSeries,[b.CurveUtil,b.Lines],{drawSeries:function(){this.get("graphic").clear();this.drawSpline();}},{ATTRS:{type:{value:"spline"}}});b.AreaSplineSeries=b.Base.create("areaSplineSeries",b.CartesianSeries,[b.Fills,b.CurveUtil],{drawSeries:function(){this.get("graphic").clear();this.drawAreaSpline();}},{ATTRS:{type:{value:"areaSpline"}}});b.StackedSplineSeries=b.Base.create("stackedSplineSeries",b.SplineSeries,[b.StackingUtil],{setAreaData:function(){b.StackedSplineSeries.superclass.setAreaData.apply(this);this._stackCoordinates.apply(this);}},{ATTRS:{type:{value:"stackedSpline"}}});b.StackedMarkerSeries=b.Base.create("stackedMarkerSeries",b.MarkerSeries,[b.StackingUtil],{setAreaData:function(){b.StackedMarkerSeries.superclass.setAreaData.apply(this);this._stackCoordinates.apply(this);}},{ATTRS:{type:{value:"stackedMarker"}}});b.ColumnSeries=b.Base.create("columnSeries",b.MarkerSeries,[b.Histogram],{_getMarkerDimensions:function(H,G,J,K){var I={top:G,left:H+K};I.calculatedSize=this._bottomOrigin-I.top;return I;},updateMarkerState:function(T,P){var W=b.clone(this.get("styles").marker),H,G=this._getState(T),U=this.get("xcoords"),O=this.get("ycoords"),Q=this._markers[P],V=this.get("graph"),L=V.seriesTypes[this.get("type")],N=L.length,S=0,M=0,R,I=0,K=[],J=this.get("order");H=G=="off"||!W[G]?W:W[G];H.fill.color=this._getItemColor(H.fill.color,P);H.border.color=this._getItemColor(H.border.color,P);H.height=this._bottomOrigin-O[P];Q.update(H);for(;I<N;++I){R=L[I].get("markers")[P];K[I]=U[P]+S;S+=R.width;if(J>I){M=S;}M-=S/2;}for(I=0;I<N;++I){R=b.one(L[I]._graphicNodes[P]);R.setStyle("left",(K[I]-S/2)+"px");}}},{ATTRS:{type:{value:"column"}}});b.BarSeries=b.Base.create("barSeries",b.MarkerSeries,[b.Histogram],{renderUI:function(){this._setNode();},_getMarkerDimensions:function(H,G,J,K){var I={top:G+K,left:this._leftOrigin};I.calculatedSize=H-I.left;return I;},updateMarkerState:function(S,O){var W=b.clone(this.get("styles").marker),H,G=this._getState(S),T=this.get("xcoords"),N=this.get("ycoords"),P=this._markers[O],V=this.get("graph"),K=V.seriesTypes[this.get("type")],M=K.length,R=0,L=0,Q,I=0,U=[],J=this.get("order");H=G=="off"||!W[G]?W:W[G];H.fill.color=this._getItemColor(H.fill.color,O);H.border.color=this._getItemColor(H.border.color,O);H.width=(T[O]-this._leftOrigin);P.update(H);for(;I<M;++I){Q=K[I].get("markers")[O];U[I]=N[O]+R;R+=Q.height;if(J>I){L=R;}L-=R/2;}for(I=0;I<M;++I){Q=b.one(K[I]._graphicNodes[O]);Q.setStyle("top",(U[I]-R/2));}}},{ATTRS:{type:{value:"bar"},direction:{value:"vertical"}}});b.AreaSeries=b.Base.create("areaSeries",b.CartesianSeries,[b.Fills],{drawSeries:function(){this.get("graphic").clear();this.drawFill.apply(this,this._getClosingPoints());},_setStyles:function(G){if(!G.area){G={area:G};}return b.AreaSeries.superclass._setStyles.apply(this,[G]);},_getDefaultStyles:function(){var G=this._mergeStyles({area:this._getAreaDefaults()},b.AreaSeries.superclass._getDefaultStyles());return G;}},{ATTRS:{type:{value:"area"}}});b.StackedAreaSplineSeries=b.Base.create("stackedAreaSplineSeries",b.AreaSeries,[b.CurveUtil,b.StackingUtil],{drawSeries:function(){this.get("graphic").clear();this._stackCoordinates();this.drawStackedAreaSpline();}},{ATTRS:{type:{value:"stackedAreaSpline"}}});b.ComboSeries=b.Base.create("comboSeries",b.CartesianSeries,[b.Fills,b.Lines,b.Plots],{drawSeries:function(){this.get("graphic").clear();if(this.get("showAreaFill")){this.drawFill.apply(this,this._getClosingPoints());}if(this.get("showLines")){this.drawLines();}if(this.get("showMarkers")){this.drawPlots();}},_getDefaultStyles:function(){var G=b.ComboSeries.superclass._getDefaultStyles();G.line=this._getLineDefaults();G.marker=this._getPlotDefaults();G.area=this._getAreaDefaults();return G;}},{ATTRS:{type:{value:"combo"},showAreaFill:{value:false},showLines:{value:true},showMarkers:{value:true},marker:{lazyAdd:false,getter:function(){return this.get("styles").marker;},setter:function(G){this.set("styles",{marker:G});}},line:{lazyAdd:false,getter:function(){return this.get("styles").line;},setter:function(G){this.set("styles",{line:G});}},area:{lazyAdd:false,getter:function(){return this.get("styles").area;},setter:function(G){this.set("styles",{area:G});}}}});b.StackedComboSeries=b.Base.create("stackedComboSeries",b.ComboSeries,[b.StackingUtil],{setAreaData:function(){b.StackedComboSeries.superclass.setAreaData.apply(this);this._stackCoordinates.apply(this);},drawSeries:function(){this.get("graphic").clear();if(this.get("showAreaFill")){this.drawFill.apply(this,this._getStackedClosingPoints());}if(this.get("showLines")){this.drawLines();}if(this.get("showMarkers")){this.drawPlots();}}},{ATTRS:{type:{value:"stackedCombo"},showAreaFill:{value:true}}});b.ComboSplineSeries=b.Base.create("comboSplineSeries",b.ComboSeries,[b.CurveUtil],{drawSeries:function(){this.get("graphic").clear();
if(this.get("showAreaFill")){this.drawAreaSpline();}if(this.get("showLines")){this.drawSpline();}if(this.get("showMarkers")){this.drawPlots();}}},{ATTRS:{type:{value:"comboSpline"}}});b.StackedComboSplineSeries=b.Base.create("stackedComboSplineSeries",b.StackedComboSeries,[b.CurveUtil],{drawSeries:function(){this.get("graphic").clear();if(this.get("showAreaFill")){this.drawStackedAreaSpline();}if(this.get("showLines")){this.drawSpline();}if(this.get("showMarkers")){this.drawPlots();}}},{ATTRS:{type:{value:"stackedComboSpline"},showAreaFill:{value:true}}});function B(G){B.superclass.constructor.apply(this,arguments);}B.NAME="rangeSeries";B.ATTRS={type:{value:"range"}};b.extend(B,b.CartesianSeries,{setAreaData:function(){var ae,ad,W=b.Node.one(this._parentNode).get("parentNode"),R=W.get("offsetWidth"),Z=W.get("offsetHeight"),U=this.get("styles").padding,V=U.left,ac=U.top,Q=this.get("xAxis"),H=this.get("yAxis"),J=this.get("xKey"),N=this.get("yKey"),L=Q.getDataByKey(J).concat(),ab=H.getDataByKey(N).concat(),ah=Q.getEdgeOffset(L.length,R),O=R-(V+U.right+ah),Y=Z-(ac+U.bottom),T=[],ag=[],af=Q.get("maximum"),aa=Q.get("minimum"),I=H.get("maximum"),G=H.get("minimum"),M=O/(af-aa),S=Y/(I-G),P=L.length,X,K;ah*=0.5;this.get("graphic").setSize(R,Z);this._leftOrigin=Math.round(((0-aa)*M)+V);this._bottomOrigin=Math.round((Y+ac)-(0-G)*S);for(X=0;X<P;++X){K=ab[X];ae=Math.round((((L[X]-aa)*M)+V+ah));ad={h:Math.round(((Y+ac)-(K.high-G)*S)),l:Math.round(((Y+ac)-(K.low-G)*S)),o:Math.round(((Y+ac)-(K.open-G)*S)),c:Math.round(((Y+ac)-(K.close-G)*S))};T.push(ae);ag.push(ad);}this.set("xcoords",T);this.set("ycoords",ag);},drawSeries:function(){if(this.get("xcoords").length<1){return;}var P=this.get("graphic"),X=this.get("styles").marker,O=X.width,Q=this.get("xcoords"),Z=this.get("ycoords"),U=0,V=Q.length,J=this.get("type"),H=this.get("graph"),N=H.seriesTypes[J],W=N.length,G=0,I=0,L=0,M,S,T=this.get("order"),R=b.Node.one(this._parentNode).get("parentNode"),K,Y;for(;U<W;++U){S=N[U];G+=S.get("styles").marker.width;if(T>U){L=G;}}I=V*G;if(I>R.offsetWidth){M=this.width/I;G*=M;L*=M;O*=M;O=Math.max(O,1);}L-=G/2;for(U=0;U<V;++U){Y=Z[U];K=Q[U]+L;this.drawMarker(P,Y,K,X);}}});b.RangeSeries=B;function q(G){q.superclass.constructor.apply(this,arguments);}q.NAME="ohlcSeries";q.ATTRS={type:{value:"ohlc"}};b.extend(q,b.RangeSeries,{drawMarker:function(N,X,I,T){var S=X.h,O=X.o,Q=X.l,V=X.c,M=T.width,R,H=T.upColor,K=T.downColor,J,P=T.upAlpha,U=T.downAlpha,L=V<O,G=T.thickness,W=I+M*0.5;R=L?H:K;J=L?P:U;N.lineStyle(G,R,J);N.moveTo(I,O);N.lineTo(W,O);N.moveTo(W,S);N.lineTo(W,Q);N.moveTo(W,V);N.lineTo(I+M,V);N.end();},_getDefaultStyles:function(){return{marker:{upColor:"#aaaaaa",upAlpha:1,thickness:1,borderAlpha:1,downColor:"#000000",downAlpha:1,width:6,height:6},padding:{top:0,left:0,right:0,bottom:0}};}});b.OHLCSeries=q;function u(G){u.superclass.constructor.apply(this,arguments);}u.NAME="candlestickSeries";u.ATTRS={type:{value:"candlestick"}};b.extend(u,b.RangeSeries,{drawMarker:function(O,an,M,ag){var al=an.h,ah=an.o,aj=an.l,ao=an.c,ai=Math.abs(ao-ah),ad=ag.width,ar,ac=ag.upFillColor,J=ag.downFillColor,ak,Y=ag.upFillAlpha,aq=ag.downFillAlpha,W=ao<ah,ae=ag.upFillType||"solid",aa=ag.downFillType||"solid",K=ag.borderWidth,X=ag.borderColor,ap=ag.borderAlpha||1,af,ab=ag.upColors,am=ag.downColors,U,T=ag.upAlphas||[],Z=ag.downAlphas||[],R,P=ag.upRatios||[],S=ag.downRatios||[],V,L=ag.upRotation||0,I=ag.downRotation||0,Q=W?ae:aa,N=ao<ah?ao:ah,H=ao<ah?ah:ao,G=M+ad*0.5;if(K>0){O.lineStyle(K,X,ap);}if(Q==="solid"){ar=W?ac:J;ak=W?Y:aq;O.beginFill(ar,ak);}else{af=W?ab:am;V=W?L:I;R=W?P:S;U=W?T:Z;O.beginGradientFill(Q,af,U,R,{rotation:V,width:ad,height:ai});}if(N>al){O.moveTo(G,al);O.lineTo(G,N);}O.drawRect(M,N,ad,ai);if(aj>ao&&aj>ah){O.moveTo(G,H);O.lineTo(G,aj);}O.end();},_getDefaultStyles:function(){return{marker:{upFillColor:"#ffffff",upFillAlpha:1,borderColor:"#000000",borderWidth:1,borderAlpha:1,upColors:[],upAlphas:[],upRatios:[],upRotation:0,downFillColor:"#000000",downFillAlpha:1,downBorderColor:"#000000",downBorderWidth:0,downBorderAlpha:1,downColors:[],downAlphas:[],downRatios:[],downRotation:0,width:6,height:6},padding:{top:0,left:0,right:0,bottom:0}};}});b.CandlestickSeries=u;b.StackedLineSeries=b.Base.create("stackedLineSeries",b.LineSeries,[b.StackingUtil],{setAreaData:function(){b.StackedLineSeries.superclass.setAreaData.apply(this);this._stackCoordinates.apply(this);}},{ATTRS:{type:{value:"stackedLine"}}});b.StackedAreaSeries=b.Base.create("stackedAreaSeries",b.AreaSeries,[b.StackingUtil],{setAreaData:function(){b.StackedAreaSeries.superclass.setAreaData.apply(this);this._stackCoordinates.apply(this);},drawSeries:function(){this.get("graphic").clear();this.drawFill.apply(this,this._getStackedClosingPoints());}},{ATTRS:{type:{value:"stackedArea"}}});b.StackedColumnSeries=b.Base.create("stackedColumnSeries",b.ColumnSeries,[b.StackingUtil],{drawSeries:function(){if(this.get("xcoords").length<1){return;}var Z=this.get("styles").marker,R=Z.width,Y=Z.height,S=this.get("xcoords"),ab=this.get("ycoords"),W=0,X=S.length,T=ab[0],J=this.get("type"),H=this.get("graph"),O=H.seriesTypes[J],M,V=this.get("order"),Q=this.get("graphOrder"),K,N,L,P,U,G=V===0,I=X*R,aa;this._createMarkerCache();if(I>this.get("width")){M=this.width/I;R*=M;R=Math.max(R,1);}if(!G){L=O[V-1];P=L.get("negativeBaseValues");U=L.get("positiveBaseValues");}else{P=[];U=[];}this.set("negativeBaseValues",P);this.set("positiveBaseValues",U);for(W=0;W<X;++W){T=ab[W];if(G){Y=this._bottomOrigin-T;if(T<this._bottomOrigin){U[W]=T;P[W]=this._bottomOrigin;}else{if(T>this._bottomOrigin){U[W]=this._bottomOrigin;P[W]=T;}else{U[W]=T;P[W]=T;}}}else{if(T>this._bottomOrigin){T+=(P[W]-this._bottomOrigin);Y=P[W]-T;P[W]=T;}else{if(T<this._bottomOrigin){T=U[W]-(this._bottomOrigin-ab[W]);Y=U[W]-T;U[W]=T;}}}K=S[W]-R/2;Z.width=R;Z.height=Y;N=this.getMarker(Z,Q,W);aa=b.one(N.parentNode);aa.setStyle("position","absolute");aa.setStyle("left",K);aa.setStyle("top",T);}this._clearMarkerCache();},updateMarkerState:function(M,K){var O,I,H=this._getState(M),N=this.get("xcoords"),L=this._markers[K],G=this._graphicCollection[K],J=0;
O=this.get("styles").marker;I=H=="off"||!O[H]?O:O[H];I.height=L.height;L.update(I);J=O.width*0.5;b.one(G.node).setStyle("left",(N[K]-J));},_getPlotDefaults:function(){var G={fill:{type:"solid",alpha:1,colors:null,alphas:null,ratios:null},border:{weight:0,alpha:1},width:24,height:24,shape:"rect",padding:{top:0,left:0,right:0,bottom:0}};G.fill.color=this._getDefaultColor(this.get("graphOrder"),"fill");G.border.color=this._getDefaultColor(this.get("graphOrder"),"border");return G;}},{ATTRS:{type:{value:"stackedColumn"},negativeBaseValues:{value:null},positiveBaseValues:{value:null}}});b.StackedBarSeries=b.Base.create("stackedBarSeries",b.BarSeries,[b.StackingUtil],{drawSeries:function(){if(this.get("xcoords").length<1){return;}var Y=this.get("styles").marker,Q=Y.width,X=Y.height,R=this.get("xcoords"),ab=this.get("ycoords"),V=0,W=R.length,S=ab[0],I=this.get("type"),H=this.get("graph"),N=H.seriesTypes[I],L,U=this.get("order"),P=this.get("graphOrder"),J,M,K,O,T,G=U===0,Z=W*X,aa;this._createMarkerCache();if(Z>this.get("height")){L=this.height/Z;X*=L;X=Math.max(X,1);}if(!G){K=N[U-1];O=K.get("negativeBaseValues");T=K.get("positiveBaseValues");}else{O=[];T=[];}this.set("negativeBaseValues",O);this.set("positiveBaseValues",T);for(V=0;V<W;++V){S=ab[V];J=R[V];if(G){Q=J-this._leftOrigin;if(J>this._leftOrigin){T[V]=J;O[V]=this._leftOrigin;}else{if(J<this._leftOrigin){T[V]=this._leftOrigin;O[V]=J;}else{T[V]=J;O[V]=this._leftOrigin;}}J-=Q;}else{if(J<this._leftOrigin){J=O[V]-(this._leftOrigin-R[V]);Q=O[V]-J;O[V]=J;}else{if(J>this._leftOrigin){J+=(T[V]-this._leftOrigin);Q=J-T[V];T[V]=J;J-=Q;}}}S-=X/2;Y.width=Q;Y.height=X;M=this.getMarker(Y,P,V);aa=b.one(M.parentNode);aa.setStyle("position","absolute");aa.setStyle("left",J);aa.setStyle("top",S);}this._clearMarkerCache();},updateMarkerState:function(N,K){var H=this._getState(N),J=this.get("ycoords"),L=this._markers[K],G=this._graphicCollection[K],O=this.get("styles").marker,M=O.height,I=H=="off"||!O[H]?O:O[H];I.width=L.width;L.update(I);b.one(G).setStyle("top",(J[K]-M/2));},_getPlotDefaults:function(){var G={fill:{type:"solid",alpha:1,colors:null,alphas:null,ratios:null},border:{weight:0,alpha:1},width:24,height:24,shape:"rect",padding:{top:0,left:0,right:0,bottom:0}};G.fill.color=this._getDefaultColor(this.get("graphOrder"),"fill");G.border.color=this._getDefaultColor(this.get("graphOrder"),"border");return G;}},{ATTRS:{type:{value:"stackedBar"},direction:{value:"vertical"},negativeBaseValues:{value:null},positiveBaseValues:{value:null}}});b.Axis=b.Base.create("axis",b.Widget,[b.Renderer],{dataSetChangeHandler:function(I){var H=I.newVal,G=I.prevVal;if(G){G.detach("dataReady",this._dataChangeHandler);G.detach("dataUpdate",this._dataChangeHandler);}H.after("dataReady",b.bind(this._dataChangeHandler,this));H.after("dataUpdate",b.bind(this._dataChangeHandler,this));},_dataChangeHandler:function(G){if(this.get("rendered")){this._drawAxis();}},_updateHandler:function(G){if(this.get("rendered")){this._drawAxis();}},_positionChangeHandler:function(G){this._layout=this.getLayout(this.get("position"));if(this.get("rendered")){this._drawAxis();}},renderUI:function(){this._layout=this.getLayout(this.get("position"));this._setCanvas();},bindUI:function(){var G=this.get("dataSet");if(G){G.after("dataReady",b.bind(this._dataChangeHandler,this));G.after("dataUpdate",b.bind(this._dataChangeHandler,this));}this.after("axisChange",this.dataSetChangeHandler);this.after("stylesChange",this._updateHandler);this.after("positionChange",this._positionChangeHandler);this.after("overlapGraphChange",this._updateHandler);this.after("widthChange",this._handleSizeChange);this.after("heightChange",this._handleSizeChange);},syncUI:function(){this._drawAxis();},_setCanvas:function(){var G=this.get("contentBox"),L=this.get("boundingBox"),K=this.get("position"),I=this._parentNode,H=this.get("width"),J=this.get("height");L.setStyle("position","absolute");H=H?H+"px":I.getStyle("width");J=J?J+"px":I.getStyle("height");if(K==="top"||K==="bottom"){G.setStyle("width",H);}else{G.setStyle("height",J);}G.setStyle("position","relative");G.setStyle("left","0px");G.setStyle("top","0px");this.set("graphic",new b.Graphic());this.get("graphic").render(G);},_getDefaultStyles:function(){var G={majorTicks:{display:"inside",length:4,color:"#808080",weight:1,alpha:1},minorTicks:{display:"none",length:2,color:"#808080",weight:1},line:{weight:1,color:"#808080",alpha:1},majorUnit:{determinant:"count",count:11,distance:75},top:"0px",left:"0px",width:"100px",height:"100px",label:{color:"#808080",fontSize:"85%",rotation:0,margin:{top:4,right:4,bottom:4,left:4}},hideOverlappingLabelTicks:false};return b.merge(b.Renderer.prototype._getDefaultStyles(),G);},_handleSizeChange:function(J){var I=J.type,L=this.get("position"),H=L=="left"||L=="right",G=this.get("contentBox"),K=L=="bottom"||L=="top";G.setStyle("width",this.get("width"));G.setStyle("height",this.get("height"));if((K&&I=="widthChange")||(H&&I=="heightChange")){this._drawAxis();}},_layout:null,getLayout:function(H){var G;switch(H){case"top":G=new b.TopAxisLayout({axisRenderer:this});break;case"bottom":G=new b.BottomAxisLayout({axisRenderer:this});break;case"left":G=new b.LeftAxisLayout({axisRenderer:this});break;case"right":G=new b.RightAxisLayout({axisRenderer:this});break;}return G;},drawLine:function(I,H,G){var J=this.get("graphic");J.lineStyle(G.weight,G.color,G.alpha);J.moveTo(I.x,I.y);J.lineTo(H.x,H.y);J.end();},_drawAxis:function(){var M=this.get("styles"),W=M.majorTicks,G=W.display!="none",N,I=M.majorUnit,Q=this.get("dataSet"),U,S,T=0,R,X,P,L,V=this._layout,K=this.get("labelFunction")||Q.get("labelFunction"),H=this.get("labelFunctionScope")||this,J=this.get("labelFormat")||Q.get("labelFormat"),O=this.get("graphic");O.clear();V.setTickOffsets();R=this.getLength();P=V.getLineStart();U=Q.getTotalMajorUnits(I,R);S=Q.getMajorUnitDistance(U,R,I);this.set("edgeOffset",Q.getEdgeOffset(U,R)*0.5);N=this.getFirstPoint(P);this.drawLine(P,this.getLineEnd(N),M.line);if(G){V.drawTick(N,W);
}if(U<1){return;}this._createLabelCache();this._tickPoints=[];V.set("maxLabelSize",0);for(;T<U;++T){if(G){V.drawTick(N,W);}X=this.getPosition(N);L=this.getLabel(N);L.innerHTML=K.apply(H,[Q.getLabelByIndex(T,U),J]);N=this.getNextPoint(N,S);}V.setSizeAndPosition();this._clearLabelCache();if(this.get("overlapGraph")){V.offsetNodeForTick(this.get("contentBox"));}V.setCalculatedSize();for(T=0;T<U;++T){V.positionLabel(this.get("labels")[T],this._tickPoints[T]);}this.fire("axisRendered");},_labels:null,_labelCache:null,getLabel:function(K,L){var I,H,G=this._labelCache,J=this.get("styles").label;if(G.length>0){H=G.shift();}else{H=document.createElement("span");H.style.whiteSpace="nowrap";b.one(H).addClass("axisLabel");}H.style.display="block";H.style.position="absolute";this.get("contentBox").appendChild(H);this._labels.push(H);this._tickPoints.push({x:K.x,y:K.y});this._layout.updateMaxLabelSize(H);for(I in J){if(J.hasOwnProperty(I)&&I!="rotation"&&I!="margin"){H.style[I]=J[I];}}return H;},_createLabelCache:function(){if(this._labels){this._labelCache=this._labels.concat();}else{this._labelCache=[];}this._labels=[];},_clearLabelCache:function(){var G=this._labelCache.length,I=0,H,J;for(;I<G;++I){H=J[I];H.parentNode.removeChild(H);}this._labelCache=[];},_calculateSizeByTickLength:true,getLineEnd:function(I){var G=this.get("width"),H=this.get("height"),J=this.get("position");if(J==="top"||J==="bottom"){return{x:G,y:I.y};}else{return{x:I.x,y:H};}},getLength:function(){var H,J=this.get("styles"),K=J.padding,G=this.get("width"),I=this.get("height"),L=this.get("position");if(L==="top"||L==="bottom"){H=G-(K.left+K.right);}else{H=I-(K.top+K.bottom);}return H;},getFirstPoint:function(J){var G=this.get("styles"),K=this.get("position"),I=G.padding,H={x:J.x,y:J.y};if(K==="top"||K==="bottom"){H.x+=I.left+this.get("edgeOffset");}else{H.y+=this.get("height")-(I.top+this.get("edgeOffset"));}return H;},getNextPoint:function(G,H){var I=this.get("position");if(I==="top"||I==="bottom"){G.x=G.x+H;}else{G.y=G.y-H;}return G;},getLastPoint:function(){var H=this.get("styles"),I=H.padding,G=this.get("width"),J=this.get("position");if(J==="top"||J==="bottom"){return{x:G-I.right,y:I.top};}else{return{x:I.left,y:I.top};}},getPosition:function(G){var L,J=this.get("height"),I=this.get("styles"),K=I.padding,M=this.get("position"),H=this.get("dataSet").get("dataType");if(M==="left"||M==="right"){if(H==="numeric"){L=(J-(K.top+K.bottom))-(G.y-K.top);}else{L=G.y-K.top;}}else{L=G.x-K.left;}return L;}},{ATTRS:{edgeOffset:{value:0},graphic:{},dataSet:{},node:{},position:{value:"bottom",validator:function(G){return((G==="bottom"||G==="top"||G==="left"||G==="right"));}},topTickOffset:{value:0},bottomTickOffset:{value:0},leftTickOffset:{value:0},rightTickOffset:{value:0},labels:{readOnly:true,getter:function(){return this._labels;}},tickPoints:{readOnly:true,getter:function(){return this._tickPoints;}},overlapGraph:{value:true,validator:function(G){return b.Lang.isBoolean(G);}},labelFunction:{},labelFunctionScope:{},labelFormat:{}}});function m(G){m.superclass.constructor.apply(this,arguments);}m.ATTRS={axisRenderer:{value:null},maxLabelSize:{value:0}};b.extend(m,b.Base,{setTickOffsets:function(){var G=this.get("axisRenderer"),K=G.get("styles").majorTicks,I=K.length,H=I*0.5,J=K.display;G.set("topTickOffset",0);G.set("bottomTickOffset",0);switch(J){case"inside":G.set("rightTickOffset",I);break;case"outside":G.set("leftTickOffset",I);break;case"cross":G.set("rightTickOffset",H);G.set("leftTickOffset",H);break;default:G.set("rightTickOffset",0);G.set("leftTickOffset",0);break;}},drawTick:function(M,K){var H=this.get("axisRenderer"),I=H.get("styles"),L=I.padding,J=K.length,N={x:L.left,y:M.y},G={x:J+L.left,y:M.y};H.drawLine(N,G,K);},getLineStart:function(){var G=this.get("axisRenderer"),H=G.get("styles"),L=H.padding,M=H.majorTicks,I=M.length,K=M.display,J={x:L.left,y:0};if(K==="outside"){J.x+=I;}else{if(K==="cross"){J.x+=I/2;}}return J;},getLabelPoint:function(G){var H=this.get("axisRenderer");return{x:G.x-H.get("leftTickOffset"),y:G.y};},updateMaxLabelSize:function(N){var J=this.get("axisRenderer"),G=J.get("styles").label,H=Math.min(90,Math.max(-90,G.rotation)),K=Math.abs(H),L=Math.PI/180,O=parseFloat(parseFloat(Math.sin(K*L)).toFixed(8)),I=parseFloat(parseFloat(Math.cos(K*L)).toFixed(8)),M;if(b.UA.ie){N.style.filter="progid:DXImageTransform.Microsoft.BasicImage(rotation="+H+")";this.set("maxLabelSize",Math.max(this.get("maxLabelSize"),N.offsetWidth));}else{if(H===0){M=N.offsetWidth;}else{if(K===90){M=N.offsetHeight;}else{M=(I*N.offsetWidth)+(O*N.offsetHeight);}}this.set("maxLabelSize",Math.max(this.get("maxLabelSize"),M));}},positionLabel:function(T,V){var M=this.get("axisRenderer"),G=M.get("styles").label,N=0,J=V.x,Q=V.y,K=Math.min(90,Math.max(-90,G.rotation)),O=Math.abs(K),S=Math.PI/180,U=parseFloat(parseFloat(Math.sin(O*S)).toFixed(8)),I=parseFloat(parseFloat(Math.cos(O*S)).toFixed(8)),R=I,P=K>0?-U:U,L=-P,H=R;if(G.margin&&G.margin.right){N=G.margin.right;}if(b.UA.ie){T.style.filter="progid:DXImageTransform.Microsoft.BasicImage(rotation=0)";if(K===0){J-=T.offsetWidth;Q-=T.offsetHeight*0.5;}else{if(O===90){J-=T.offsetHeight;Q-=T.offsetWidth*0.5;}else{if(K===-90){J-=T.offsetHeight;Q-=T.offsetWidth*0.5;}else{if(K>0){J-=(I*T.offsetWidth)+(T.offsetHeight*K/90);Q-=(U*T.offsetWidth)+(I*(T.offsetHeight*0.5));}else{J-=(I*T.offsetWidth)+(O/90*T.offsetHeight);Q-=I*(T.offsetHeight*0.5);}}}}T.style.left=(this.get("maxLabelSize")+J)+"px";T.style.top=Q+"px";T.style.filter="progid:DXImageTransform.Microsoft.Matrix(M11="+R+" M12="+P+" M21="+L+" M22="+H+' sizingMethod="auto expand")';return;}if(K===0){J-=T.offsetWidth;Q-=T.offsetHeight*0.5;}else{if(K===90){Q-=T.offsetWidth*0.5;}else{if(K===-90){J-=T.offsetHeight;Q+=T.offsetWidth*0.5;}else{if(K<0){J-=(I*T.offsetWidth)+(U*T.offsetHeight);Q+=(U*T.offsetWidth)-(I*(T.offsetHeight*0.6));}else{J-=(I*T.offsetWidth);Q-=(U*T.offsetWidth)+(I*(T.offsetHeight*0.6));}}}}J-=N;T.style.left=(this.get("maxLabelSize")+J)+"px";
T.style.top=Q+"px";T.style.MozTransformOrigin="0 0";T.style.MozTransform="rotate("+K+"deg)";T.style.webkitTransformOrigin="0 0";T.style.webkitTransform="rotate("+K+"deg)";},setSizeAndPosition:function(){var L=this.get("maxLabelSize"),J=this.get("axisRenderer"),H=J.get("styles"),O=H.line.weight,G=J.get("graphic"),M=H.majorTicks,N=M.display,I=M.length,K=H.label.margin;if(N==="inside"){O-=I;}else{if(N==="cross"){O-=I*0.5;}}if(K&&K.right){O+=K.right;}O+=L;O=Math.round(O);J.set("width",O);b.one(G.node).setStyle("left",O);},offsetNodeForTick:function(G){var H=this.get("axisRenderer"),K=H.get("styles").majorTicks,I=K.length,J=K.display;if(J==="inside"){G.setStyle("left",I+"px");}else{if(J==="cross"){G.setStyle("left",(I*0.5)+"px");}else{G.setStyle("left","0px");}}},setCalculatedSize:function(){var H=this.get("axisRenderer"),I=H.get("styles").label,G=H.get("leftTickOffset")+this.get("maxLabelSize")+I.margin.right;H.set("width",Math.round(G));}});b.LeftAxisLayout=m;function r(G){r.superclass.constructor.apply(this,arguments);}r.ATTRS={axisRenderer:{value:null}};b.extend(r,b.Base,{setTickOffsets:function(){var G=this.get("axisRenderer"),K=G.get("styles").majorTicks,I=K.length,H=I*0.5,J=K.display;G.set("topTickOffset",0);G.set("bottomTickOffset",0);switch(J){case"inside":G.set("leftTickOffset",I);break;case"outside":G.set("rightTickOffset",I);break;case"cross":G.set("rightTickOffset",H);G.set("leftTickOffset",H);break;}},drawTick:function(M,K){var H=this.get("axisRenderer"),I=H.get("styles"),L=I.padding,J=K.length,N={x:L.left,y:M.y},G={x:L.left+J,y:M.y};H.drawLine(N,G,K);},getLineStart:function(){var G=this.get("axisRenderer"),H=G.get("styles"),L=H.padding,M=H.majorTicks,I=M.length,K=M.display,J={x:L.left,y:L.top};if(K==="inside"){J.x+=I;}else{if(K==="cross"){J.x+=I/2;}}return J;},getLabelPoint:function(G){var H=this.get("axisRenderer");return{x:G.x+H.get("rightTickOffset"),y:G.y};},updateMaxLabelSize:function(N){var J=this.get("axisRenderer"),G=J.get("styles").label,H=Math.min(90,Math.max(-90,G.rotation)),K=Math.abs(H),L=Math.PI/180,O=parseFloat(parseFloat(Math.sin(K*L)).toFixed(8)),I=parseFloat(parseFloat(Math.cos(K*L)).toFixed(8)),M;if(b.UA.ie){N.style.filter="progid:DXImageTransform.Microsoft.BasicImage(rotation="+H+")";this.set("maxLabelSize",Math.max(this.get("maxLabelSize"),N.offsetWidth));}else{if(H===0){M=N.offsetWidth;}else{if(K===90){M=N.offsetHeight;}else{M=(I*N.offsetWidth)+(O*N.offsetHeight);}}this.set("maxLabelSize",Math.max(this.get("maxLabelSize"),M));}},positionLabel:function(T,V){var M=this.get("axisRenderer"),G=M.get("styles").label,N=0,J=V.x,Q=V.y,K=Math.min(Math.max(G.rotation,-90),90),O=Math.abs(K),S=Math.PI/180,U=parseFloat(parseFloat(Math.sin(O*S)).toFixed(8)),I=parseFloat(parseFloat(Math.cos(O*S)).toFixed(8)),R=I,P=K>0?-U:U,L=-P,H=R;if(G.margin&&G.margin.right){N=G.margin.right;}if(b.UA.ie){T.style.filter="progid:DXImageTransform.Microsoft.BasicImage(rotation=0)";if(K===0){Q-=T.offsetHeight*0.5;}else{if(O===90){Q-=T.offsetWidth*0.5;}else{if(K>0){Q-=(I*(T.offsetHeight*0.5));}else{Q-=(U*T.offsetWidth)+(I*(T.offsetHeight*0.5));}}}J+=N;T.style.left=J+"px";T.style.top=Q+"px";T.style.filter="progid:DXImageTransform.Microsoft.Matrix(M11="+R+" M12="+P+" M21="+L+" M22="+H+' sizingMethod="auto expand")';return;}if(K===0){Q-=T.offsetHeight*0.5;}else{if(K===90){J+=T.offsetHeight;Q-=T.offsetWidth*0.5;}else{if(K===-90){Q+=T.offsetWidth*0.5;}else{if(K<0){Q-=(I*(T.offsetHeight*0.6));}else{Q-=I*(T.offsetHeight*0.6);J+=U*T.offsetHeight;}}}}J+=N;T.style.left=J+"px";T.style.top=Q+"px";T.style.MozTransformOrigin="0 0";T.style.MozTransform="rotate("+K+"deg)";T.style.webkitTransformOrigin="0 0";T.style.webkitTransform="rotate("+K+"deg)";},setSizeAndPosition:function(){var H=this.get("axisRenderer"),G=this.get("maxLabelSize"),I=H.get("styles"),K=I.line.weight,L=I.majorTicks,J=L.display,M=L.length;if(J==="outside"){K+=M;}else{if(J==="cross"){K+=M*0.5;}}K+=G;H.set("width",K);},offsetNodeForTick:function(G){var H=this.get("axisRenderer"),K=H.get("styles").majorTicks,I=K.length,J=K.display;if(J==="inside"){G.setStyle("left",0-I+"px");}else{if(J==="cross"){G.setStyle("left",0-(I*0.5)+"px");}}},setCalculatedSize:function(){var H=this.get("axisRenderer"),I=H.get("styles").label,G=H.get("rightTickOffset")+this.get("maxLabelSize")+I.margin.left;H.set("width",G);}});b.RightAxisLayout=r;function A(G){A.superclass.constructor.apply(this,arguments);}A.ATTRS={axisRenderer:{value:null},maxLabelSize:{value:0}};b.extend(A,b.Base,{setTickOffsets:function(){var G=this.get("axisRenderer"),K=G.get("styles").majorTicks,I=K.length,H=I*0.5,J=K.display;G.set("leftTickOffset",0);G.set("rightTickOffset",0);switch(J){case"inside":G.set("topTickOffset",I);break;case"outside":G.set("bottomTickOffset",I);break;case"cross":G.set("topTickOffset",H);G.set("bottomTickOffset",H);break;}},getLineStart:function(){var G=this.get("axisRenderer"),H=G.get("styles"),L=H.padding,M=H.majorTicks,I=M.length,K=M.display,J={x:0,y:L.top};if(K==="inside"){J.y+=I;}else{if(K==="cross"){J.y+=I/2;}}return J;},drawTick:function(M,K){var H=this.get("axisRenderer"),I=H.get("styles"),L=I.padding,J=K.length,N={x:M.x,y:L.top},G={x:M.x,y:J+L.top};H.drawLine(N,G,K);},getLabelPoint:function(G){var H=this.get("axisRenderer");return{x:G.x,y:G.y+H.get("bottomTickOffset")};},updateMaxLabelSize:function(N){var J=this.get("axisRenderer"),G=J.get("styles").label,H=Math.min(90,Math.max(-90,G.rotation)),K=Math.abs(H),L=Math.PI/180,O=parseFloat(parseFloat(Math.sin(K*L)).toFixed(8)),I=parseFloat(parseFloat(Math.cos(K*L)).toFixed(8)),M;if(b.UA.ie){N.style.filter="progid:DXImageTransform.Microsoft.BasicImage(rotation="+H+")";this.set("maxLabelSize",Math.max(this.get("maxLabelSize"),N.offsetHeight));}else{if(H===0){M=N.offsetHeight;}else{if(K===90){M=N.offsetWidth;}else{M=(O*N.offsetWidth)+(I*N.offsetHeight);}}this.set("maxLabelSize",Math.max(this.get("maxLabelSize"),M));}},positionLabel:function(T,V){var M=this.get("axisRenderer"),G=M.get("styles").label,N=0,J=V.x,Q=V.y,K=Math.min(90,Math.max(-90,G.rotation)),O=Math.abs(K),S=Math.PI/180,U=parseFloat(parseFloat(Math.sin(O*S)).toFixed(8)),I=parseFloat(parseFloat(Math.cos(O*S)).toFixed(8)),R=I,P=K>0?-U:U,L=-P,H=R;
if(G.margin&&G.margin.top){N=G.margin.top;}if(b.UA.ie){R=I;P=K>0?-U:U;L=-P;H=R;T.style.filter="progid:DXImageTransform.Microsoft.BasicImage(rotation=0)";if(O===90){J-=T.offsetHeight*0.5;}else{if(K<0){J-=I*T.offsetWidth;J-=U*(T.offsetHeight*0.5);}else{if(K>0){J-=U*(T.offsetHeight*0.5);}else{J-=T.offsetWidth*0.5;}}}Q+=N;T.style.left=J+"px";T.style.top=Q+"px";T.style.filter="progid:DXImageTransform.Microsoft.Matrix(M11="+R+" M12="+P+" M21="+L+" M22="+H+' sizingMethod="auto expand")';return;}if(K===0){J-=T.offsetWidth*0.5;}else{if(O===90){if(K===90){J+=T.offsetHeight*0.5;}else{Q+=T.offsetWidth;J-=T.offsetHeight*0.5;}}else{if(K<0){J-=(I*T.offsetWidth)+(U*(T.offsetHeight*0.6));Q+=U*T.offsetWidth;}else{J+=U*(T.offsetHeight*0.6);}}}Q+=N;T.style.left=J+"px";T.style.top=Q+"px";T.style.MozTransformOrigin="0 0";T.style.MozTransform="rotate("+K+"deg)";T.style.webkitTransformOrigin="0 0";T.style.webkitTransform="rotate("+K+"deg)";},setSizeAndPosition:function(){var G=this.get("maxLabelSize"),H=this.get("axisRenderer"),I=H.get("styles"),L=I.line.weight,M=I.majorTicks,K=M.display,N=M.length,J=I.label.margin;if(K==="outside"){L+=N;}else{if(K==="cross"){L+=N*0.5;}}if(J&&J.top){L+=J.top;}L+=G;L=Math.round(L);H.set("height",L);},offsetNodeForTick:function(G){var H=this.get("axisRenderer"),J=H.get("styles"),L=J.majorTicks,I=L.length,K=L.display;if(K==="inside"){G.setStyle("marginTop",(0-I)+"px");}else{if(K==="cross"){G.setStyle("marginTop",(0-(I*0.5))+"px");}}},setCalculatedSize:function(){var H=this.get("axisRenderer"),I=H.get("styles").label,G=H.get("bottomTickOffset")+this.get("maxLabelSize")+I.margin.top;H.set("height",Math.round(G));}});b.BottomAxisLayout=A;function a(G){a.superclass.constructor.apply(this,arguments);}a.ATTRS={axisRenderer:{value:null}};b.extend(a,b.Base,{setTickOffsets:function(){var G=this.get("axisRenderer"),K=G.get("styles").majorTicks,I=K.length,H=I*0.5,J=K.display;G.set("leftTickOffset",0);G.set("rightTickOffset",0);switch(J){case"inside":G.set("bottomTickOffset",I);break;case"outside":G.set("topTickOffset",I);break;case"cross":G.set("topTickOffset",H);G.set("bottomTickOffset",H);break;}},getLineStart:function(){var G=this.get("axisRenderer"),H=G.get("styles"),L=H.padding,M=H.majorTicks,I=M.length,K=M.display,J={x:0,y:L.top};if(K==="outside"){J.y+=I;}else{if(K==="cross"){J.y+=I/2;}}return J;},drawTick:function(M,K){var H=this.get("axisRenderer"),I=H.get("styles"),L=I.padding,J=K.length,N={x:M.x,y:L.top},G={x:M.x,y:J+L.top};H.drawLine(N,G,K);},getLabelPoint:function(H){var G=this.get("axisRenderer");return{x:H.x,y:H.y-G.get("topTickOffset")};},updateMaxLabelSize:function(N){var J=this.get("axisRenderer"),G=J.get("styles").label,H=Math.min(90,Math.max(-90,G.rotation)),K=Math.abs(H),L=Math.PI/180,O=parseFloat(parseFloat(Math.sin(K*L)).toFixed(8)),I=parseFloat(parseFloat(Math.cos(K*L)).toFixed(8)),M;if(b.UA.ie){N.style.filter="progid:DXImageTransform.Microsoft.BasicImage(rotation="+H+")";this.set("maxLabelSize",Math.max(this.get("maxLabelSize"),N.offsetHeight));}else{if(H===0){M=N.offsetHeight;}else{if(K===90){M=N.offsetWidth;}else{M=(O*N.offsetWidth)+(I*N.offsetHeight);}}this.set("maxLabelSize",Math.max(this.get("maxLabelSize"),M));}},positionLabel:function(T,V){var M=this.get("axisRenderer"),G=M.get("styles").label,N=0,J=V.x,Q=V.y,K=Math.max(-90,Math.min(90,G.rotation)),O=Math.abs(K),S=Math.PI/180,U=parseFloat(parseFloat(Math.sin(O*S)).toFixed(8)),I=parseFloat(parseFloat(Math.cos(O*S)).toFixed(8)),R,P,L,H;K=Math.min(90,K);K=Math.max(-90,K);if(G.margin&&G.margin.bottom){N=G.margin.bottom;}if(b.UA.ie){T.style.filter="progid:DXImageTransform.Microsoft.BasicImage(rotation=0)";R=I;P=K>0?-U:U;L=-P;H=R;if(K===0){J-=T.offsetWidth*0.5;Q-=T.offsetHeight;}else{if(O===90){J-=T.offsetHeight*0.5;Q-=T.offsetWidth;}else{if(K>0){J-=(I*T.offsetWidth)+Math.min((U*T.offsetHeight),(K/180*T.offsetHeight));Q-=(U*T.offsetWidth)+(I*(T.offsetHeight));}else{J-=U*(T.offsetHeight*0.5);Q-=(U*T.offsetWidth)+(I*(T.offsetHeight));}}}Q-=N;T.style.left=J;T.style.top=Q;T.style.filter="progid:DXImageTransform.Microsoft.Matrix(M11="+R+" M12="+P+" M21="+L+" M22="+H+' sizingMethod="auto expand")';return;}if(K===0){J-=T.offsetWidth*0.5;Q-=T.offsetHeight;}else{if(K===90){J+=T.offsetHeight*0.5;Q-=T.offsetWidth;}else{if(K===-90){J-=T.offsetHeight*0.5;Q-=0;}else{if(K<0){J-=(U*(T.offsetHeight*0.6));Q-=(I*T.offsetHeight);}else{J-=(I*T.offsetWidth)-(U*(T.offsetHeight*0.6));Q-=(U*T.offsetWidth)+(I*T.offsetHeight);}}}}Q-=N;T.style.left=J+"px";T.style.top=Q+"px";T.style.MozTransformOrigin="0 0";T.style.MozTransform="rotate("+K+"deg)";T.style.webkitTransformOrigin="0 0";T.style.webkitTransform="rotate("+K+"deg)";},setSizeAndPosition:function(G){var H=this.get("axisRenderer"),I=H.get("styles"),K=I.line.weight,L=I.majorTicks,J=L.display,M=L.length;if(J==="outside"){K+=M;}else{if(J==="cross"){K+=M*0.5;}}K+=G;H.get("contentBox").setStyle("top",G+"px");H.set("height",K);},offsetNodeForTick:function(G){var H=this.get("axisRenderer"),K=H.get("styles").majorTicks,I=K.length,J=K.display;if(J==="inside"){G.setStyle("marginBottom",(0-I)+"px");}else{if(J==="cross"){G.setStyle("marginBottom",(0-(I*0.5))+"px");}}},setCalculatedSize:function(){var H=this.get("axisRenderer"),I=H.get("styles").label,G=H.get("topTickOffset")+this.get("maxLabelSize")+I.margin.bottom;H.set("height",G);}});b.TopAxisLayout=a;b.Gridlines=b.Base.create("gridlines",b.Base,[b.Renderer],{render:function(){this._setCanvas();},remove:function(){var H=this.get("graphic"),G;if(H){G=H.node;if(G){b.one(G).remove();}}},draw:function(){if(this.get("axis")&&this.get("graph")){this._drawGridlines();}},_drawGridlines:function(){var G=this.get("graphic"),H=this.get("axis"),R=H.get("tickPoints"),M=0,J=R.length,P=this.get("direction"),S=this.get("graph"),Q=S.get("width"),O=S.get("height"),T=this.get("styles").line,L=T.color,N=T.weight,K=T.alpha,I=P=="vertical"?this._verticalLine:this._horizontalLine;if(!G){this._setCanvas();G=this.get("graphic");}G.clear();G.setSize(Q,O);G.lineStyle(N,L,K);for(;
M<J;++M){I(G,R[M],Q,O);}G.end();},_horizontalLine:function(J,I,G,H){J.moveTo(0,I.y);J.lineTo(G,I.y);},_verticalLine:function(J,I,G,H){J.moveTo(I.x,0);J.lineTo(I.x,H);},_setCanvas:function(){this.set("graphic",new b.Graphic());this.get("graphic").render(this.get("graph").get("contentBox"));},_getDefaultStyles:function(){var G={line:{color:"#fff",weight:1,alpha:1}};return G;}},{ATTRS:{direction:{},axis:{},graph:{}}});b.Graph=b.Base.create("graph",b.Widget,[b.Renderer],{bindUI:function(){var G=this.get("boundingBox");G.setStyle("position","absolute");this.after("widthChange",this._sizeChangeHandler);this.after("heightChange",this._sizeChangeHandler);this.after("stylesChange",this._updateStyles);},syncUI:function(){if(this.get("showBackground")){var K=new b.Graphic(),G=this.get("contentBox"),I=this.get("styles").background,H=this.get("width"),J=this.get("height");if(H){I.width=H;}if(J){I.height=J;}this._background=K.getShape(I);K.render(G);b.one(K.node).setStyle("zIndex",-1);}},renderUI:function(){var J=this.get("seriesCollection"),I,H=0,G=J.length;for(;H<G;++H){I=J[H];if(I instanceof b.CartesianSeries){I.render();}}},seriesTypes:null,getSeriesByIndex:function(I){var G=this.get("seriesCollection"),H;if(G&&G.length>I){H=G[I];}return H;},getSeriesByKey:function(I){var H=this._seriesDictionary,G;if(H&&H.hasOwnProperty(I)){G=H[I];}return G;},addDispatcher:function(G){if(!this._dispatchers){this._dispatchers=[];}this._dispatchers.push(G);},_seriesCollection:null,_seriesDictionary:null,_parseSeriesCollection:function(K){if(!K){return;}var H=K.length,J=0,I,G;if(!this.get("seriesCollection")){this._seriesCollection=[];}if(!this._seriesDictionary){this._seriesDictionary={};}if(!this.seriesTypes){this.seriesTypes=[];}for(;J<H;++J){I=K[J];if(!(I instanceof b.CartesianSeries)&&!(I instanceof b.PieSeries)){this._createSeries(I);continue;}this._addSeries(I);}H=this.get("seriesCollection").length;for(J=0;J<H;++J){I=this.get("seriesCollection")[J];G=I.get("direction")=="horizontal"?"yKey":"xKey";this._seriesDictionary[I.get(G)]=I;}},_addSeries:function(I){var J=I.get("type"),L=this.get("seriesCollection"),K=L.length,H=this.seriesTypes,G;if(!I.get("graph")){I.set("graph",this);}L.push(I);if(!H.hasOwnProperty(J)){this.seriesTypes[J]=[];}G=this.seriesTypes[J];I.set("graphOrder",K);I.set("order",G.length);G.push(I);this.addDispatcher(I);I.after("drawingComplete",b.bind(this._drawingCompleteHandler,this));this.fire("seriesAdded",I);},_createSeries:function(K){var L=K.type,M=this.get("seriesCollection"),I=this.seriesTypes,H,G,J;K.graph=this;if(!I.hasOwnProperty(L)){I[L]=[];}H=I[L];K.graph=this;K.order=H.length;K.graphOrder=M.length;G=this._getSeries(K.type);J=new G(K);this.addDispatcher(J);J.after("drawingComplete",b.bind(this._drawingCompleteHandler,this));H.push(J);M.push(J);},_getSeries:function(G){var H;switch(G){case"line":H=b.LineSeries;break;case"column":H=b.ColumnSeries;break;case"bar":H=b.BarSeries;break;case"area":H=b.AreaSeries;break;case"candlestick":H=b.CandlestickSeries;break;case"ohlc":H=b.OHLCSeries;break;case"stackedarea":H=b.StackedAreaSeries;break;case"stackedline":H=b.StackedLineSeries;break;case"stackedcolumn":H=b.StackedColumnSeries;break;case"stackedbar":H=b.StackedBarSeries;break;case"markerseries":H=b.MarkerSeries;break;case"spline":H=b.SplineSeries;break;case"areaspline":H=b.AreaSplineSeries;break;case"stackedspline":H=b.StackedSplineSeries;break;case"stackedareaspline":H=b.StackedAreaSplineSeries;break;case"stackedmarkerseries":H=b.StackedMarkerSeries;break;case"pie":H=b.PieSeries;break;case"combo":H=b.ComboSeries;break;case"stackedcombo":H=b.StackedComboSeries;break;case"combospline":H=b.ComboSplineSeries;break;case"stackedcombospline":H=b.StackedComboSplineSeries;break;default:H=b.CartesianSeries;break;}return H;},_markerEventHandler:function(L){var J=L.type,G=L.currentTarget,K=G.getAttribute("id").split("_"),I=this.getSeriesByIndex(K[1]),H=K[2];I.updateMarkerState(J,H);},_dispatchers:null,_updateStyles:function(){this._background.update(this.get("styles").background);this._sizeChangeHandler();},_sizeChangeHandler:function(L){var M=this.get("seriesCollection"),G=this.get("horizontalGridlines"),N=this.get("verticalGridlines"),J=0,I,H=this.get("width"),K=this.get("height");if(this._background){if(H&&K){this._background.update({width:H,height:K});}}if(G&&G instanceof b.Gridlines){G.draw();}if(N&&N instanceof b.Gridlines){N.draw();}if(M){I=M.length;for(;J<I;++J){M[J].draw();}}},_drawingCompleteHandler:function(I){var H=I.currentTarget,G=b.Array.indexOf(this._dispatchers,H);if(G>-1){this._dispatchers.splice(G,1);}if(this._dispatchers.length<1){this.fire("chartRendered");}},_getDefaultStyles:function(){var G={background:{shape:"rect",fill:{color:"#faf9f2"},border:{color:"#ccc",weight:1}}};return G;}},{ATTRS:{seriesCollection:{getter:function(){return this._seriesCollection;},setter:function(G){this._parseSeriesCollection(G);return this._seriesCollection;}},showBackground:{value:true},seriesDictionary:{readOnly:true,getter:function(){return this._seriesDictionary;}},horizontalGridlines:{value:null,setter:function(H){var G=this.get("horizontalGridlines");if(G&&G instanceof b.Gridlines){G.remove();}if(H instanceof b.Gridlines){G=H;H.set("graph",this);H.render();return H;}else{if(H&&H.axis){G=new b.Gridlines({direction:"horizontal",axis:H.axis,graph:this,styles:H.styles});G.render();return G;}}}},verticalGridlines:{value:null,setter:function(H){var G=this.get("verticalGridlines");if(G&&G instanceof b.Gridlines){G.remove();}if(H instanceof b.Gridlines){G=H;H.set("graph",this);H.render();return H;}else{if(H&&H.axis){G=new b.Gridlines({direction:"vertical",axis:H.axis,graph:this,styles:H.styles});G.render();return G;}}}}}});function p(){}p.ATTRS={tooltip:{valueFn:"_getTooltip",setter:function(G){return this._updateTooltip(G);}},interactionType:{value:"marker"},graph:{valueFn:"_getGraph"}};p.prototype={_getGraph:function(){var G=new b.Graph();G.after("chartRendered",b.bind(function(H){this.fire("chartRendered");
},this));return G;},getSeries:function(I){var G=null,H=this.get("graph");if(H){if(b.Lang.isNumber(I)){G=H.getSeriesByIndex(I);}else{G=H.getSeriesByKey(I);}}return G;},getAxisByKey:function(I){var G,H=this.get("axes");if(H.hasOwnProperty(I)){G=H[I];}return G;},getCategoryAxis:function(){var H,G=this.get("categoryKey"),I=this.get("axes");if(I.hasOwnProperty(G)){H=I[G];}return H;},_direction:"horizontal",_dataProvider:null,_setDataValues:function(L){if(b.Lang.isArray(L[0])){var K,N=[],I=L[0],J=0,H=I.length,M,G=L.length;for(;J<H;++J){K={category:I[J]};for(M=1;M<G;++M){K["series"+M]=L[M][J];}N[J]=K;}this._dataProvider=N;return;}this._dataProvider=L;},_seriesCollection:null,_setSeriesCollection:function(G){this._seriesCollection=G;},_getDataClass:function(G){return this._dataClass[G];},_dataClass:{stacked:b.StackedAxis,numeric:b.NumericAxis,category:b.CategoryAxis,time:b.TimeAxis},_dataAxes:null,_axes:null,renderUI:function(){this.get("boundingBox").setStyle("position","absolute");this.get("contentBox").setStyle("position","absolute");this._addAxes();this._addSeries();if(this.get("showTooltip")){this._addTooltip();}this._redraw();},bindUI:function(){this.after("showTooltipChange",b.bind(this._showTooltipChangeHandler,this));this.after("widthChange",this._sizeChanged);this.after("heightChange",this._sizeChanged);var G=this.get("contentBox"),I=this.get("interactionType"),H;if(I=="marker"){b.delegate("mouseenter",b.bind(this._markerEventHandler,this),G,".yui3-seriesmarker");b.delegate("mousedown",b.bind(this._markerEventHandler,this),G,".yui3-seriesmarker");b.delegate("mouseup",b.bind(this._markerEventHandler,this),G,".yui3-seriesmarker");b.delegate("mouseleave",b.bind(this._markerEventHandler,this),G,".yui3-seriesmarker");b.delegate("mousemove",b.bind(this._positionTooltip,this),G,".yui3-seriesmarker");H=this._displayTooltip;}else{if(I=="all"){this._overlay.on("mousemove",b.bind(this._mouseMoveHandler,this));this.on("mouseout",this._hideTooltip);H=this._displayMultiTooltip;}}if(this.get("tooltip")){this.on("markerEvent:mouseover",H);this.on("markerEvent:mouseout",this._hideTooltip);}},_markerEventHandler:function(K){var L=K.type,G=this.get("contentBox"),P=K.currentTarget,O=P.getAttribute("id").split("_"),H=O[0],I=this.getSeries(parseInt(O[1],10)),J=O[2],N=K.pageX-G.getX(),M=K.pageY-G.getY();if(L=="mouseenter"){L="mouseover";}else{if(L=="mouseleave"){L="mouseout";}}I.updateMarkerState(L,J);this.fire("markerEvent:"+L,{node:P,x:N,y:M,series:I,index:J,seriesIndex:H});},_showTooltip:function(J,G,K){var H=this.get("tooltip"),I=H.node;if(J){I.set("innerHTML",J);I.setStyle("top",K+"px");I.setStyle("left",G+"px");I.removeClass("yui3-widget-hidden");}},_positionTooltip:function(K){var I=this.get("tooltip"),J=I.node,H=this.get("contentBox"),G=(K.pageX+10)-H.getX(),L=(K.pageY+10)-H.getY();if(J){J.setStyle("left",G+"px");J.setStyle("top",L+"px");}},_hideTooltip:function(){var G=this.get("tooltip"),H=G.node;H.set("innerHTML","");H.setStyle("left",-10000);H.setStyle("top",-10000);H.addClass("yui3-widget-hidden");},_addTooltip:function(){var G=this.get("tooltip");this.get("contentBox").appendChild(G.node);},_updateTooltip:function(J){var H=this._tooltip,G,I=J.styles;if(I){for(G in I){if(I.hasOwnProperty(G)){H.node.setStyle(G,I[G]);}}}if(J.hasOwnProperty("labelFunction")){H.labelFunction=J.labelFunction;}return H;},_getTooltip:function(){var H=document.createElement("div"),G={labelFunction:this._tooltipLabelFunction};H=b.one(H);H.setStyle("fontSize","9px");H.setStyle("fontWeight","bold");H.setStyle("position","absolute");H.setStyle("paddingTop","2px");H.setStyle("paddingRight","5px");H.setStyle("paddingBottom","5px");H.setStyle("paddingLeft","2px");H.setStyle("backgroundColor","#edeeee");H.setStyle("border","1px solid #aeae9e");H.setStyle("zIndex",3);H.setStyle("whiteSpace","noWrap");H.addClass("yui3-widget-hidden");G.node=b.one(H);this._tooltip=G;return G;},_tooltipLabelFunction:function(L,G,J,I,H){var K=L.displayName+":&nbsp;"+L.axis.get("labelFunction").apply(this,[L.value,L.axis.get("labelFormat")])+"<br/>"+G.displayName+":&nbsp;"+G.axis.get("labelFunction").apply(this,[G.value,G.axis.get("labelFormat")]);return K;},_showTooltipChangeHandler:function(G){if(this.get("showTooltip")){this._addTooltip();}}};b.ChartBase=p;b.CartesianChart=b.Base.create("cartesianChart",b.Widget,[b.ChartBase],{renderUI:function(){this.get("boundingBox").setStyle("position","absolute");this.get("contentBox").setStyle("position","absolute");this._addAxes();this._addGridlines();this._addSeries();if(this.get("showTooltip")){this._addTooltip();}this.get("styles");if(this.get("interactionType")=="all"){var G=document.createElement("div");this.get("contentBox").appendChild(G);this._overlay=b.one(G);this._overlay.setStyle("position","absolute");this._overlay.setStyle("background","#fff");this._overlay.setStyle("opacity",0);this._overlay.addClass("yui3-overlay");this._overlay.setStyle("zIndex",4);}this._redraw();},_mouseMoveHandler:function(X){var H=this.get("graph"),K=this.get("boundingBox"),S=H.get("contentBox"),P=X.pageX,Y=P-S.getX(),N=P-K.getX(),O=X.pageY,W=O-S.getY(),M=O-K.getY(),G=H.get("seriesCollection"),Q,U=0,L,J=this._selectedIndex,R=[],Z=this.get("direction"),aa,T=Z=="horizontal"?Y:W,I=Z=="horizontal"?G[0].get("xMarkerPlane"):G[0].get("yMarkerPlane"),V=I.length;if(T%1>0){return;}for(;U<V;++U){if(T<=I[U].end&&T>=I[U].start){L=U;break;}}V=G.length;for(U=0;U<V;++U){Q=G[U];aa=Q.get("markers");if(aa&&!isNaN(J)&&J>-1){Q.updateMarkerState("mouseout",J);}if(Q.get("ycoords")[L]>-1){if(aa&&!isNaN(L)&&L>-1){Q.updateMarkerState("mouseover",L);}R.push(Q);}}this._selectedIndex=L;if(L>-1){this.fire("markerEvent:mouseover",{x:N,y:M,index:L,items:R,direction:Z,graph:H});}else{this.fire("markerEvent:mouseout");}},_type:"combo",_axesRenderQueue:null,_addToAxesRenderQueue:function(G){if(!this._axesRenderQueue){this._axesRenderQueue=[];}if(b.Array.indexOf(this._axesRenderQueue,G)<0){this._axesRenderQueue.push(G);}},_getDefaultSeriesCollection:function(ab){var R=this.get("direction"),J=this.get("categoryAxisName")||this.get("categoryKey"),H=this.get("valueAxisName"),G=ab||[],Y,V,T=[],O,N=this.get("seriesKeys").concat(),X,M,U,L=this.get("type"),Z,Q,aa,K=this.get("categoryKey"),W=this.get("showMarkers"),S=this.get("showAreaFill"),P=this.get("showLines");
if(R=="vertical"){Y="yAxis";Q="yKey";V="xAxis";aa="xKey";}else{Y="xAxis";Q="xKey";V="yAxis";aa="yKey";}U=G.length;for(X=0;X<U;++X){Z=this._getBaseAttribute(G[X],aa);if(Z){M=b.Array.indexOf(N,Z);if(M>-1){N.splice(M,1);}T.push(Z);}}if(N.length>0){T=T.concat(N);}U=T.length;for(X=0;X<U;++X){O=G[X]||{type:L};if(O instanceof b.CartesianSeries){continue;}O[Q]=O[Q]||K;O[aa]=O[aa]||N.shift();O[Y]=O[Y]||J;O[V]=this._getSeriesAxis(O[aa],H);O.type=O.type||L;if((O.type=="combo"||O.type=="stackedcombo"||O.type=="combospline"||O.type=="stackedcombospline")){if(S!==null){O.showAreaFill=O.showAreaFill||S;}if(W!==null){O.showMarkers=O.showMarkers||W;}if(P!==null){O.showLines=O.showLines||P;}}G[X]=O;}if(ab){var I=this.get("graph");I.set("seriesCollection",G);G=I.get("seriesCollection");}return G;},_getSeriesAxis:function(H,I){var K=this.get("axes"),G,J;if(K){for(G in K){if(K.hasOwnProperty(G)){J=K[G].get("dataSet").get("keys");if(J&&J.hasOwnProperty(H)){I=G;break;}}}}return I;},_getBaseAttribute:function(H,G){if(H instanceof b.Base){return H.get(G);}if(H.hasOwnProperty(G)){return H[G];}return null;},_setBaseAttribute:function(H,G,I){if(H instanceof b.Base){H.set(G,I);}else{H[G]=I;}},_parseAxes:function(H){var L=this._getDefaultAxes(H),Q={},I={edgeOffset:"edgeOffset",position:"position",overlapGraph:"overlapGraph",labelFunction:"labelFunction",labelFunctionScope:"labelFunctionScope",labelFormat:"labelFormat"},S,M,T,J,K,R,G,O,N,P;for(M in L){if(L.hasOwnProperty(M)){R=L[M];if(R instanceof b.Axis){J=R;}else{O=this._getDataClass(R.type);N={dataProvider:this.get("dataProvider"),keys:R.keys};if(R.hasOwnProperty("roundingUnit")){N.roundingUnit=R.roundingUnit;}K=new O(N);T=R.position;G={};if(R.styles){G.styles=R.styles;}G.dataSet=K;G.position=R.position;for(S in I){if(I.hasOwnProperty(S)&&R.hasOwnProperty(S)){G[S]=R[S];}}if(T&&T!="none"){J=new b.Axis(G);}}if(J){P=this.get(T+"AxesCollection");if(P&&b.Array.indexOf(P,J)>0){J.set("overlapGraph",false);}J.after("axisRendered",b.bind(this._axisRendered,this));Q[M]=J;}if(!this._dataAxes){this._dataAxes={};}if(Q[M]){this._dataAxes[M]=Q[M].get("dataSet");}else{this._dataAxes[M]=K;}}}return Q;},_addAxes:function(){var L=this.get("axes"),H,J,M,G=this.get("width"),I=this.get("height"),K=b.Node.one(this._parentNode);if(!this._axesCollection){this._axesCollection=[];}for(H in L){if(L.hasOwnProperty(H)){J=L[H];if(J instanceof b.Axis){if(!G){this.set("width",K.get("offsetWidth"));G=this.get("width");}if(!I){this.set("height",K.get("offsetHeight"));I=this.get("height");}J.set("width",G);J.set("height",I);this._addToAxesRenderQueue(J);M=J.get("position");if(!this.get(M+"AxesCollection")){this.set(M+"AxesCollection",[J]);}else{this.get(M+"AxesCollection").push(J);}this._axesCollection.push(J);if(J.get("dataSet").get("keys").hasOwnProperty(this.get("categoryKey"))){this.set("categoryAxis",J.get("dataSet"));}J.render(this.get("contentBox"));}}}},_addSeries:function(){var G=this.get("graph"),H=this.get("seriesCollection");this._parseSeriesAxes(H);G.render(this.get("contentBox"));},_addGridlines:function(){var H=this.get("graph"),G=this.get("horizontalGridlines"),I=this.get("verticalGridlines");if(G){if(!this._getBaseAttribute(G,"axis")){this._setBaseAttribute(G,"axis",this.get("leftAxesCollection")[0]||this.get("rightAxesCollection")[0]);if(this._getBaseAttribute(G,"axis")){H.set("horizontalGridlines",G);}}}if(I){if(!this._getBaseAttribute(I,"axis")){this._setBaseAttribute(I,"axis",this.get("bottomAxesCollection")[0]||this.get("topAxesCollection")[0]);if(this._getBaseAttribute(I,"axis")){H.set("verticalGridlines",I);}}}},_parseSeriesAxes:function(K){var H=0,G=K.length,J,I;for(;H<G;++H){J=K[H];if(J){this._setBaseAttribute(J,"xAxis",this._dataAxes[this._getBaseAttribute(J,"xAxis")]);this._setBaseAttribute(J,"yAxis",this._dataAxes[this._getBaseAttribute(J,"yAxis")]);}}},_getDefaultAxes:function(X){var Q=this.get("categoryKey"),H,V,S,J={},U=[],I=this.get("categoryAxisName")||this.get("categoryKey"),G=this.get("valueAxisName"),K=this.get("seriesKeys")||[],Y,W,P,N,T,R=this.get("dataProvider")[0],Z=this.get("direction"),O,L,M=[],aa=this.get("stacked")?"stacked":"numeric";if(Z=="vertical"){O="bottom";L="left";}else{O="left";L="bottom";}if(X){for(Y in X){if(X.hasOwnProperty(Y)){H=X[Y];S=this._getBaseAttribute(H,"keys");V=this._getBaseAttribute(H,"type");if(V=="time"||V=="category"){I=Y;this.set("categoryAxisName",Y);if(b.Lang.isArray(S)&&S.length>0){Q=S[0];this.set("categoryKey",Q);}J[Y]=H;}else{if(Y==I){J[Y]=H;}else{J[Y]=H;if(Y!=G&&S&&b.Lang.isArray(S)){N=S.length;for(P=0;P<N;++P){U.push(S[P]);}M.push(J[Y]);}if(!(this._getBaseAttribute(J[Y],"type"))){this._setBaseAttribute(J[Y],"type",aa);}if(!(this._getBaseAttribute(J[Y],"position"))){this._setBaseAttribute(J[Y],"position",this._getDefaultAxisPosition(J[Y],M,O));}}}}}}if(K.length<1){for(Y in R){if(R.hasOwnProperty(Y)&&Y!=Q&&b.Array.indexOf(U,Y)==-1){K.push(Y);}}}T=b.Array.indexOf(K,Q);if(T>-1){K.splice(T,1);}W=U.length;for(Y=0;Y<W;++Y){T=b.Array.indexOf(K,U[Y]);if(T>-1){K.splice(T,1);}}if(!J.hasOwnProperty(I)){J[I]={};}if(!(this._getBaseAttribute(J[I],"keys"))){this._setBaseAttribute(J[I],"keys",[Q]);}if(!(this._getBaseAttribute(J[I],"position"))){this._setBaseAttribute(J[I],"position",L);}if(!(this._getBaseAttribute(J[I],"type"))){this._setBaseAttribute(J[I],"type",this.get("categoryType"));}if(!J.hasOwnProperty(G)&&K&&K.length>0){J[G]={keys:K};M.push(J[G]);}if(U.length>0){if(K.length>0){K=U.concat(K);}else{K=U;}}if(J.hasOwnProperty(G)){if(!(this._getBaseAttribute(J[G],"position"))){this._setBaseAttribute(J[G],"position",this._getDefaultAxisPosition(J[G],M,O));}if(!(this._getBaseAttribute(J[G],"type"))){this._setBaseAttribute(J[G],"type",aa);}if(!(this._getBaseAttribute(J[G],"keys"))){this._setBaseAttribute(J[G],"keys",K);}}this.set("seriesKeys",K);return J;},_getDefaultAxisPosition:function(J,H,G){var I=b.Array.indexOf(H,J);if(H[I-1]&&H[I-1].position){if(H[I-1].position=="left"){G="right";}else{if(H[I-1].position=="right"){G="left";}else{if(H[I-1].position=="bottom"){G="top";
}else{G="bottom";}}}}return G;},_displayTooltip:function(S){var K=S.node,T=b.Widget.getByNode(K),U=S.node.getAttribute("id").split("_"),M=U[1],N=T.getSeriesByIndex(M),O=U[2],I=N.get("xAxis"),G=N.get("yAxis"),R=N.get("xKey"),L=N.get("yKey"),H={},Q={},P=this.get("tooltip"),J;if(this.get("direction")=="vertical"){H={axis:G,key:L,value:G.getKeyValueAt(L,O)};Q={axis:I,key:R,value:I.getKeyValueAt(R,O)};}else{Q={axis:G,key:L,value:G.getKeyValueAt(L,O)};H={axis:I,key:R,value:I.getKeyValueAt(R,O)};}H.displayName=N.get("categoryDisplayName");Q.displayName=N.get("valueDisplayName");J=P.labelFunction.apply(this,[H,Q,O,N,M]);if(K){this._showTooltip(J,S.x+10,S.y+10);}},_displayMultiTooltip:function(P){var Q=P.items,O=Q.length,K=0,N=P.index,J="",L,I,H,M=this.get("categoryAxis"),G=P.direction=="horizontal";if(M){J=M.get("labelFunction").apply(this,[M.getKeyValueAt(this.get("categoryKey"),N),M.get("labelFormat")]);}for(;K<O;++K){L=Q[K];if(L.get("visible")){if(G){H=L.get("yAxis");J+="<br/><span>"+L.get("yDisplayName")+":&nbsp;"+H.get("labelFunction").apply(this,[H.getKeyValueAt(L.get("yKey"),N),H.get("labelFormat")])+"</span>";}else{I=L.get("xAxis");J+="<br/><span>"+L.get("xDisplayName")+"&nbsp;"+I.get("labelFunction").apply(this,[I.getKeyValueAt(L.get("xKey"),N),I.get("labelFormat")])+"</span>";}}}this._showTooltip(J,P.x+10,P.y+10);},_showTooltipChangeHandler:function(G){if(this.get("showTooltip")&&this.get("rendered")){this._addTooltip();}},_axisRendered:function(G){this._axesRenderQueue=this._axesRenderQueue.splice(1+b.Array.indexOf(this._axesRenderQueue,G.currentTarget),1);if(this._axesRenderQueue.length<1){this._redraw();}},_sizeChanged:function(J){if(this._axesCollection){var I=this._axesCollection,H=0,G=I.length;for(;H<G;++H){this._addToAxesRenderQueue(I[H]);}this._redraw();}},_redraw:function(){var T=this.get("width"),Q=this.get("height"),L=0,J=0,H=0,O=0,I=this.get("leftAxesCollection"),G=this.get("rightAxesCollection"),N=this.get("topAxesCollection"),R=this.get("bottomAxesCollection"),P=0,M,K,S,V=[],U=this.get("graph");if(I){M=I.length;for(P=M-1;P>-1;--P){V[b.Array.indexOf(this._axesCollection,I[P])]={x:L+"px"};L+=I[P].get("width");}}if(G){M=G.length;P=0;for(P=M-1;P>-1;--P){J+=G[P].get("width");V[b.Array.indexOf(this._axesCollection,G[P])]={x:(T-J)+"px"};}}if(N){M=N.length;for(P=M-1;P>-1;--P){V[b.Array.indexOf(this._axesCollection,N[P])]={y:H+"px"};H+=N[P].get("height");}}if(R){M=R.length;for(P=M-1;P>-1;--P){O+=R[P].get("height");V[b.Array.indexOf(this._axesCollection,R[P])]={y:(Q-O)+"px"};}}M=this._axesCollection.length;P=0;for(;P<M;++P){K=this._axesCollection[P];S=K.get("position");if(S=="left"||S==="right"){K.get("boundingBox").setStyle("top",H+"px");K.get("boundingBox").setStyle("left",V[P].x);if(K.get("height")!==Q-(O+H)){K.set("height",Q-(O+H));}continue;}if(K.get("width")!==T-(L+J)){K.set("width",T-(L+J));}K.get("boundingBox").setStyle("left",L+"px");K.get("boundingBox").setStyle("top",V[P].y);}if(U){U.get("boundingBox").setStyle("left",L+"px");U.get("boundingBox").setStyle("top",H+"px");U.set("width",T-(L+J));U.set("height",Q-(H+O));}if(this._overlay){this._overlay.setStyle("left",L+"px");this._overlay.setStyle("top",H+"px");this._overlay.setStyle("width",(T-(L+J))+"px");this._overlay.setStyle("height",(Q-(H+O))+"px");}}},{ATTRS:{axesStyles:{getter:function(){var I=this.get("axes"),G,H=this._axesStyles;if(I){for(G in I){if(I.hasOwnProperty(G)&&I[G] instanceof b.Axis){if(!H){H={};}H[G]=I[G].get("styles");}}}return H;},setter:function(I){var H=this.get("axes"),G;for(G in I){if(I.hasOwnProperty(G)&&H.hasOwnProperty(G)){this._setBaseAttribute(H[G],"styles",I[G]);}}}},seriesStyles:{getter:function(){var H=this._seriesStyles,I=this.get("graph"),J,G;if(I){J=I.get("seriesDictionary");if(J){H={};for(G in J){if(J.hasOwnProperty(G)){H[G]=J[G].get("styles");}}}}return H;},setter:function(J){var H,G,I;if(b.Lang.isArray(J)){I=this.get("seriesCollection");H=0;G=J.length;for(;H<G;++H){this._setBaseAttribute(I[H],"styles",J[H]);}}else{for(H in J){if(J.hasOwnProperty(H)){I=this.getSeries(H);this._setBaseAttribute(I,"styles",J[H]);}}}}},graphStyles:{getter:function(){var G=this.get("graph");if(G){return(G.get("styles"));}return this._graphStyles;},setter:function(H){var G=this.get("graph");this._setBaseAttribute(G,"styles",H);}},styles:{getter:function(){var G={axes:this.get("axesStyles"),series:this.get("seriesStyles"),graph:this.get("graphStyles")};return G;},setter:function(G){if(G.hasOwnProperty("axes")){if(this.get("axesStyles")){this.set("axesStyles",G.axes);}else{this._axesStyles=G.axes;}}if(G.hasOwnProperty("series")){if(this.get("seriesStyles")){this.set("seriesStyles",G.series);}else{this._seriesStyles=G.series;}}if(G.hasOwnProperty("graph")){this.set("graphStyles",G.graph);}}},dataProvider:{getter:function(){return this._dataProvider;},setter:function(H){if(this._dataAxes){var G;for(G in this._dataAxes){if(this._dataAxes.hasOwnProperty(G)){this._dataAxes[G].set("dataProvider",H);}}this._dataProvider=H;}else{this._setDataValues(H);}}},axes:{valueFn:"_parseAxes",setter:function(G){return this._parseAxes(G);}},seriesCollection:{valueFn:"_getDefaultSeriesCollection",setter:function(G){return this._getDefaultSeriesCollection(G);}},leftAxesCollection:{},bottomAxesCollection:{},rightAxesCollection:{},topAxesCollection:{},axesCollection:{},stacked:{value:false},direction:{getter:function(){var G=this.get("type");if(G=="bar"){return"vertical";}else{if(G=="column"){return"horizontal";}}return this._direction;},setter:function(G){this._direction=G;return this._direction;}},showTooltip:{value:true},categoryKey:{value:"category"},seriesKeys:{},showAreaFill:{},showMarkers:{},showLines:{},categoryType:{value:"category"},categoryAxisName:{},valueAxisName:{value:"values"},horizontalGridlines:{getter:function(){var G=this.get("graph");if(G){return G.get("horizontalGridlines");}return this._horizontalGridlines;},setter:function(H){var G=this.get("graph");if(H&&!b.Lang.isObject(H)){H={};}if(G){G.set("horizontalGridlines",H);
}else{this._horizontalGridlines=H;}}},verticalGridlines:{getter:function(){var G=this.get("graph");if(G){return G.get("verticalGridlines");}return this._verticalGridlines;},setter:function(H){var G=this.get("graph");if(H&&!b.Lang.isObject(H)){H={};}if(G){G.set("verticalGridlines",H);}else{this._verticalGridlines=H;}}},type:{getter:function(){if(this.get("stacked")){return"stacked"+this._type;}return this._type;},setter:function(G){if(this._type=="bar"){if(G!="bar"){this.set("direction","horizontal");}}else{if(G=="bar"){this.set("direction","vertical");}}this._type=G;return this._type;}},categoryAxis:{}}});b.PieChart=b.Base.create("pieChart",b.Widget,[b.ChartBase],{_getSeriesCollection:function(){if(this._seriesCollection){return this._seriesCollection;}var L=this.get("axes"),N=[],M,J=0,I,O=this.get("type"),Q,G="categoryAxis",K="categoryKey",H="valueAxis",P="valueKey";if(L){M=L.values.get("dataSet").get("keyCollection");Q=L.category.get("dataSet").get("keyCollection")[0];I=M.length;for(;J<I;++J){N[J]={type:O};N[J][G]="category";N[J][H]="values";N[J][K]=Q;N[J][P]=M[J];}}this._seriesCollection=N;return N;},_parseAxes:function(K){if(!this._axes){this._axes={};}if(!this._dataAxes){this._dataAxes={};}var L,Q,I,J,P,G,N,O=this.get("type"),R=this.get("width"),M=this.get("height"),H=b.Node.one(this._parentNode);if(!R){this.set("width",H.get("offsetWidth"));R=this.get("width");}if(!M){this.set("height",H.get("offsetHeight"));M=this.get("height");}for(L in K){if(K.hasOwnProperty(L)){P=K[L];Q=O=="pie"?"none":P.position;N=this._getDataClass(P.type);G={dataProvider:this.get("dataProvider"),keys:P.keys};if(P.hasOwnProperty("roundingUnit")){G.roundingUnit=P.roundingUnit;}J=new N(G);if(Q&&Q!="none"){I=new b.Axis({dataSet:J,width:R,height:M,position:P.position,styles:P.styles});I.on("axisRendered",b.bind(this._axisRendered,this));this._axes[L]=I;}this._dataAxes[L]=J;}}},_addAxes:function(){var J=this.get("axes"),G,H,I;if(!J){this.set("axes",this._getDefaultAxes());J=this.get("axes");}if(!this._axesCollection){this._axesCollection=[];}for(G in J){if(J.hasOwnProperty(G)){H=J[G];I=H.get("position");if(!this.get(I+"AxesCollection")){this.set(I+"AxesCollection",[H]);}else{this.get(I+"AxesCollection").push(H);}this._axesCollection.push(H);}}},_addSeries:function(){var G=this.get("graph"),H=this.get("seriesCollection");this._parseSeriesAxes(H);G.set("showBackground",false);G.set("width",this.get("width"));G.set("height",this.get("height"));G.set("seriesCollection",H);this._seriesCollection=G.get("seriesCollection");G.render(this.get("contentBox"));},_parseSeriesAxes:function(K){var H=0,G=K.length,J,I;for(;H<G;++H){J=K[H];if(J){if(J instanceof b.PieSeries){I=J.get("categoryAxis");if(I&&!(I instanceof b.BaseAxis)){J.set("categoryAxis",this._dataAxes[I]);}I=J.get("valueAxis");if(I&&!(I instanceof b.BaseAxis)){J.set("valueAxis",this._dataAxes[I]);}continue;}J.categoryAxis=this._dataAxes.category;J.valueAxis=this._dataAxes.values;if(!J.type){J.type=this.get("type");}}}},_getDefaultAxes:function(){var K=this.get("categoryKey"),H=this.get("seriesKeys")||[],G="numeric",J,I=this.get("dataProvider")[0];if(H.length<1){for(J in I){if(J!=K){H.push(J);}}if(H.length>0){this.set("seriesKeys",H);}}return{values:{keys:H,type:G},category:{keys:[K],type:this.get("categoryType")}};},_displayTooltip:function(N){var O=this.get("tooltip"),I=N.node,P=b.Widget.getByNode(I),Q=N.node.getAttribute("id").split("_"),J=Q[1],K=P.getSeriesByIndex(J),L=Q[2],G={axis:K.get("categoryAxis"),key:K.get("categoryKey"),displayName:K.get("categoryDisplayName")},M={axis:K.get("valueAxis"),key:K.get("valueKey"),displayName:K.get("valueDisplayName")},H;G.value=G.axis.getKeyValueAt(G.key,L);M.value=M.axis.getKeyValueAt(M.key,L);H=O.labelFunction.apply(this,[G,M,L,K,J]);this._showTooltip(H,N.x+10,N.y+10);},_sizeChanged:function(G){this._redraw();},_redraw:function(){var G=this.get("graph");if(G){G.set("width",this.get("width"));G.set("height",this.get("height"));}}},{ATTRS:{dataProvider:{getter:function(){return this._dataProvider;},setter:function(H){if(this._dataAxes){var G;for(G in this._dataAxes){if(this._dataAxes.hasOwnProperty(G)){this._dataAxes[G].set("dataProvider",H);}}this._dataProvider=H;}else{this._setDataValues(H);}}},axes:{getter:function(){return this._axes;},setter:function(G){this._parseAxes(G);}},seriesCollection:{getter:function(){return this._getSeriesCollection();},setter:function(G){return this._setSeriesCollection(G);}},axesCollection:{value:null},type:{value:"pie"},graph:{},direction:{getter:function(){var G=this.get("type");if(G=="bar"){return"vertical";}else{if(G=="column"){return"horizontal";}}return this._direction;},setter:function(G){this._direction=G;}},showTooltip:{value:true},categoryKey:{value:"category"},seriesKeys:{value:null},categoryType:{value:"category"}}});function z(G){if(G.type!="pie"){return new b.CartesianChart(G);}else{return new b.PieChart(G);}}b.Chart=z;},"gallery-2010.11.17-21-32",{requires:["dom","datatype","event-custom","event-mouseenter","widget","widget-position","widget-stack"]});